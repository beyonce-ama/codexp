import{r as l,j as e,L as m}from"./app-BuRLjU8-.js";import{a as L,A as g,T as h}from"./app-layout-CEYTXcBV.js";import{R as p}from"./refresh-cw-Qlv7-TtY.js";import{C as U}from"./chart-column-BBfG8OEa.js";import{U as M,C as u}from"./users-DVlukIXh.js";import{A as $}from"./award-CulWoKeN.js";import{T as j}from"./trending-up-D2pALwSW.js";import{B as D,S as b}from"./x-BBbKFNnZ.js";import{T as f}from"./triangle-alert-sI7kZm1L.js";import{Z as E}from"./zap-CcamGLmT.js";import{T as v}from"./trophy-CljwK_6u.js";import{M as P}from"./message-square-DdSrewTV.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-CqB03MrR.js";const N=[{title:"Home",href:"/dashboard"},{title:"Admin",href:"/dashboard"},{title:"Reports & Analytics",href:"/admin/reports"}];function W(){const[s,y]=l.useState(null),[_,d]=l.useState(!0),[r,c]=l.useState(!1),[n,w]=l.useState(null);l.useEffect(()=>{o()},[]);const o=async(i=!1)=>{try{i?c(!0):d(!0);const a=await L.get("/dashboard/stats");a.success&&a.data&&(y(a.data),w(new Date))}catch(a){console.error("Error fetching database stats:",a)}finally{d(!1),c(!1)}},A=()=>{o(!0)},t=({title:i,value:a,icon:T,color:C="blue",description:x})=>{const k={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600",purple:"bg-purple-100 text-purple-600",indigo:"bg-indigo-100 text-indigo-600"};return e.jsx("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6 hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${k[C]}`,children:e.jsx(T,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:i}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a}),x&&e.jsx("p",{className:"text-xs text-gray-400",children:x})]})]})})};if(_)return e.jsxs(g,{breadcrumbs:N,children:[e.jsx(m,{title:"Reports & Analytics"}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(p,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-cyan-400"}),e.jsx("div",{className:"text-gray-300",children:"Loading database statistics..."})]})})]});const R=s&&s.total_solo_attempts>0?Math.round(s.successful_solo_attempts/s.total_solo_attempts*100):0,S=s?s.solo_attempts_today+s.duels_today:0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-cyan-400 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-1 h-1 bg-blue-400 rounded-full animate-pulse opacity-30"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-3 h-3 bg-cyan-300 rounded-full animate-bounce opacity-10"})]}),e.jsxs(g,{breadcrumbs:N,children:[e.jsx(m,{title:"Reports & Analytics"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(U,{className:"h-8 w-8 text-cyan-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"REPORTS & ANALYTICS"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time platform statistics from database"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:A,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800/50 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700/50 disabled:opacity-50",children:[e.jsx(p,{className:`h-4 w-4 ${r?"animate-spin":""}`}),e.jsx("span",{children:r?"Refreshing...":"Refresh"})]}),n&&e.jsxs("div",{className:"text-sm text-gray-400",children:["Last updated: ",n.toLocaleTimeString()]})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-4",children:"User Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(t,{title:"Total Users",value:s.total_users,icon:M,color:"blue",description:"All registered users"}),e.jsx(t,{title:"Participants",value:s.participant_users,icon:h,color:"green",description:"Active challengers"}),e.jsx(t,{title:"Administrators",value:s.admin_users,icon:$,color:"purple",description:"System admins"}),e.jsx(t,{title:"New Today",value:s.new_users_today,icon:j,color:"indigo",description:"Users joined today"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Challenge Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(t,{title:"Solo Challenges",value:s.total_solo_challenges,icon:D,color:"blue",description:"Individual challenges"}),e.jsx(t,{title:"1v1 Challenges",value:s.total_1v1_challenges,icon:b,color:"red",description:"Duel challenges"}),e.jsx(t,{title:"Fix Bugs Mode",value:s.fixbugs_challenges,icon:f,color:"yellow",description:"Debug challenges"}),e.jsx(t,{title:"Random Mode",value:s.random_challenges,icon:E,color:"purple",description:"Random challenges"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Platform Activity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(t,{title:"Solo Attempts",value:s.total_solo_attempts,icon:h,color:"blue",description:"Total individual attempts"}),e.jsx(t,{title:"Success Rate",value:`${R}%`,icon:v,color:"green",description:`${s.successful_solo_attempts} successful attempts`}),e.jsx(t,{title:"Total Duels",value:s.total_duels,icon:b,color:"red",description:`${s.completed_duels} completed, ${s.pending_duels} pending`}),e.jsx(t,{title:"Today's Activity",value:S,icon:j,color:"indigo",description:`${s.solo_attempts_today} attempts, ${s.duels_today} duels`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Programming Languages"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(u,{className:"h-5 w-5 text-green-600"})}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Python Attempts"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:s.python_attempts})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(u,{className:"h-5 w-5 text-red-600"})}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Java Attempts"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:s.java_attempts})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Language Attempts"}),e.jsx("span",{className:"text-cyan-400 font-medium",children:s.python_attempts+s.java_attempts})]})})]})]}),e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Feedback & Support"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(P,{className:"h-5 w-5 text-blue-600"})}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Total Feedback"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:s.total_feedbacks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(f,{className:"h-5 w-5 text-yellow-600"})}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Open Issues"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:s.open_feedbacks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(v,{className:"h-5 w-5 text-green-600"})}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Resolved"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:s.resolved_feedbacks})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Resolution Rate"}),e.jsxs("span",{className:"text-cyan-400 font-medium",children:[s.total_feedbacks>0?Math.round(s.resolved_feedbacks/s.total_feedbacks*100):0,"%"]})]})})]})]})]}),e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Database Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:s.total_users}),e.jsx("div",{className:"text-sm text-gray-400",children:"Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.total_solo_challenges+s.total_1v1_challenges}),e.jsx("div",{className:"text-sm text-gray-400",children:"Challenges"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:s.total_solo_attempts}),e.jsx("div",{className:"text-sm text-gray-400",children:"Attempts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.total_duels}),e.jsx("div",{className:"text-sm text-gray-400",children:"Duels"})]})]})]})]})]})]})]})}export{W as default};
