import{r as c,j as e,K as hs,L as Xe}from"./app-B2sxy847.js";import{a as Y,A as Re,T as ie}from"./app-layout-BukqaTmD.js";import{A as ps}from"./AnimatedBackground-DbjrCgsU.js";import{L as Fe}from"./loader-circle-Bt_e2hLF.js";import{A as us}from"./activity-Di1Dhc5g.js";import{c as fs}from"./createLucideIcon-BxR_u36_.js";import{S as F,U as gs,C as bs}from"./users-DtaXVtHJ.js";import{Z as Oe}from"./zap-D3MEJvQH.js";import{T as W}from"./trophy-CISoaUMK.js";import{C as Ue}from"./circle-check-big-7pwWX_9l.js";import{S as ce,a as js}from"./x-ClOJXicf.js";import{C as vs}from"./crown-DHhfdxor.js";import{C as Ns}from"./cpu-bY6Pqio7.js";import{T as Be}from"./trending-up-D_pMiqSq.js";import{M as ys,i as ws,u as He,P as _s,a as ks,b as Ss,L as Cs,m as Ge}from"./proxy-Dt-Y7wt1.js";import"./utils-jAU0Cazi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Ye=fs("Medal",As);class Ps extends c.Component{getSnapshotBeforeUpdate(n){const t=this.props.childRef.current;if(t&&n.isPresent&&!this.props.isPresent){const b=t.offsetParent,v=ws(b)&&b.offsetWidth||0,x=this.props.sizeRef.current;x.height=t.offsetHeight||0,x.width=t.offsetWidth||0,x.top=t.offsetTop,x.left=t.offsetLeft,x.right=v-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ls({children:m,isPresent:n,anchorX:t,root:b}){const v=c.useId(),x=c.useRef(null),A=c.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:E}=c.useContext(ys);return c.useInsertionEffect(()=>{const{width:T,height:f,top:L,left:g,right:u}=A.current;if(n||!x.current||!T||!f)return;const _=t==="left"?`left: ${g}`:`right: ${u}`;x.current.dataset.motionPopId=v;const N=document.createElement("style");E&&(N.nonce=E);const k=b??document.head;return k.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${v}"] {
            position: absolute !important;
            width: ${T}px !important;
            height: ${f}px !important;
            ${_}px !important;
            top: ${L}px !important;
          }
        `),()=>{k.contains(N)&&k.removeChild(N)}},[n]),e.jsx(Ps,{isPresent:n,childRef:x,sizeRef:A,children:c.cloneElement(m,{ref:x})})}const $s=({children:m,initial:n,isPresent:t,onExitComplete:b,custom:v,presenceAffectsLayout:x,mode:A,anchorX:E,root:T})=>{const f=He(Ms),L=c.useId();let g=!0,u=c.useMemo(()=>(g=!1,{id:L,initial:n,isPresent:t,custom:v,onExitComplete:_=>{f.set(_,!0);for(const N of f.values())if(!N)return;b&&b()},register:_=>(f.set(_,!1),()=>f.delete(_))}),[t,f,b]);return x&&g&&(u={...u}),c.useMemo(()=>{f.forEach((_,N)=>f.set(N,!1))},[t]),c.useEffect(()=>{!t&&!f.size&&b&&b()},[t]),A==="popLayout"&&(m=e.jsx(Ls,{isPresent:t,anchorX:E,root:T,children:m})),e.jsx(_s.Provider,{value:u,children:m})};function Ms(){return new Map}const ee=m=>m.key||"";function Je(m){const n=[];return c.Children.forEach(m,t=>{c.isValidElement(t)&&n.push(t)}),n}const Es=({children:m,custom:n,initial:t=!0,onExitComplete:b,presenceAffectsLayout:v=!0,mode:x="sync",propagate:A=!1,anchorX:E="left",root:T})=>{const[f,L]=ks(A),g=c.useMemo(()=>Je(m),[m]),u=A&&!f?[]:g.map(ee),_=c.useRef(!0),N=c.useRef(g),k=He(()=>new Map),[J,se]=c.useState(g),[I,q]=c.useState(g);Ss(()=>{_.current=!1,N.current=g;for(let y=0;y<I.length;y++){const h=ee(I[y]);u.includes(h)?k.delete(h):k.get(h)!==!0&&k.set(h,!1)}},[I,u.length,u.join("-")]);const O=[];if(g!==J){let y=[...g];for(let h=0;h<I.length;h++){const $=I[h],z=ee($);u.includes(z)||(y.splice(h,0,$),O.push($))}return x==="wait"&&O.length&&(y=O),q(Je(y)),se(g),null}const{forceRender:V}=c.useContext(Cs);return e.jsx(e.Fragment,{children:I.map(y=>{const h=ee(y),$=A&&!f?!1:g===I||u.includes(h),z=()=>{if(k.has(h))k.set(h,!0);else return;let U=!0;k.forEach(X=>{X||(U=!1)}),U&&(V==null||V(),q(N.current),A&&(L==null||L()),b&&b())};return e.jsx($s,{isPresent:$,initial:!_.current||t?void 0:!1,custom:n,presenceAffectsLayout:v,mode:x,root:T,onExitComplete:$?void 0:z,anchorX:E,children:y},h)})})},qe=[{title:"Home",href:"/dashboard"},{title:"Dashboard",href:"/dashboard"}],Is=m=>Math.floor(m/10)+1,Ke=m=>m%10,Ws=m=>Ke(m)/10*100;function et(){var pe,ue,fe,ge,be,je,ve,Ne,ye,we,_e,ke,Se,Ce,Ae,Pe,Le,$e,Me,Ee,Ie,We,Te,De;const{auth:m}=hs().props,n=m==null?void 0:m.user,[t,b]=c.useState(null),[v,x]=c.useState([]),[A,E]=c.useState(!0),[T,f]=c.useState(!1),[L,g]=c.useState(null),[u,_]=c.useState([]),[N,k]=c.useState(0),J=s=>{if(!s)return null;const l=String(s).trim();return/^(https?:\/\/|data:)/i.test(l)||l.startsWith("/")?l:l.startsWith("avatars/")||l.startsWith("storage/")?`/${l}`:`/avatars/${l}`},se=s=>s?s.startsWith("SOLO_AI_")?"Solo+AI":s.startsWith("SOLO_")?"Solo":s.startsWith("PVP_INVITE_")?"Invite Duel":s.startsWith("PVP_LIVE_")?"Live Match":s.startsWith("LANG_PY_")?"Python":s.startsWith("LANG_JAVA_")?"Java":"General":"General",I=s=>s&&typeof s=="object"&&("code"in s||"threshold"in s||"xp_reward"in s||"name"in s||"goal"in s),q=s=>{const l=Number(s.threshold??s.goal??0),o=Number(s.current??s.count??0),i=s.progress!=null?Number(s.progress):l>0?Math.min(100,Math.round(o/l*100)):0,r=Number.isFinite(i)?Math.max(0,Math.min(100,i)):0,a=l>0&&o>=l||r>=100,p=!!(s.claimed??s.is_claimed??!1),w=!!(s.unlocked??a),j=!!(s.can_claim??(w&&!p)),M=s.code??s.key??s.name??"",Z=s.name??s.title??s.code,Q=s.description??s.desc,C=s.icon_key??s.icon,d=s.xp_reward??s.xp,P=s.stars_reward??s.stars,G=s.scope??s.category??s.group;return{id:Number.isFinite(Number(s.id))?Number(s.id):void 0,code:String(M),name:String(Z??"Achievement"),description:Q??void 0,icon_key:C??null,threshold:l,current:o,progress:r,unlocked:w,claimed:p,can_claim:j,xp_reward:Number(d??0),stars_reward:Number(P??0),__scope:G??se(String(M))}},O=s=>{const l=[],o=r=>{if(!r)return;if(Array.isArray(r)){r.forEach(o);return}if(typeof r!="object")return;if(I(r)){l.push(q(r));return}const a=[r.items,r.achievements,r.tasks,r.groups,r.categories,r.data].filter(Boolean);a.length?a.forEach(o):Object.values(r).forEach(o)};o(s);const i=new Set;return l.filter(r=>{const a=r.id!=null?`id:${r.id}`:`code:${r.code}|scope:${r.__scope??""}`;return i.has(a)?!1:(i.add(a),!0)})};c.useEffect(()=>{V(!0)},[]);const V=async(s=!1)=>{var l,o,i,r,a;try{s&&E(!0);const[p,w,j]=await Promise.all([Y.get("/api/me/stats"),Y.get("/api/users/participants"),Y.get("/api/achievements/progress")]),M=((l=j==null?void 0:j.data)==null?void 0:l.items)??((o=j==null?void 0:j.data)==null?void 0:o.data)??(j==null?void 0:j.data)??j,Z=O(M);if(_(Z),ls){const Q=Z.filter(C=>C.can_claim);for(const C of Q)try{const d=await Y.post("/api/achievements/claim",{achievement_id:C.id}),P=((i=d==null?void 0:d.data)==null?void 0:i.xp_reward)??C.xp_reward??0,G=((r=d==null?void 0:d.data)==null?void 0:r.stars_reward)??C.stars_reward??0;he({name:C.name,xp:P,stars:G,icon_key:C.icon_key??void 0})}catch(d){console.error("Auto-claim failed",C.id,d)}}if(k(Number((M==null?void 0:M.solo_completed)??(M==null?void 0:M.completed)??((a=j==null?void 0:j.data)==null?void 0:a.solo_completed)??0)),p!=null&&p.success&&p.data&&(b(p.data),g(new Date)),w!=null&&w.success&&Array.isArray(w.data)){const C=w.data.map(d=>{var Ve,ze;const P=Number(d.total_xp??0),G=(Ve=d.user)==null?void 0:Ve.stars,ds=d.stars,ms=Number(G??ds??0),xs=J(d.avatar??((ze=d.profile)==null?void 0:ze.avatar)??null);return{id:d.id,name:d.name,email:d.email,avatar:xs,total_xp:P,stars:ms,level:Math.floor(P/10)+1}}).sort((d,P)=>P.total_xp-d.total_xp||P.stars-d.stars).map((d,P)=>({...d,rank:P+1}));x(C)}}catch(p){console.error("Error fetching dashboard/leaderboard:",p)}finally{E(!1),f(!1)}},y=((pe=t==null?void 0:t.user)==null?void 0:pe.stars)??((ue=t==null?void 0:t.totals)==null?void 0:ue.stars)??0,h=(fe=t==null?void 0:t.solo_stats)!=null&&fe.total_attempts?Math.round(t.solo_stats.successful_attempts/t.solo_stats.total_attempts*100):0,$=(ge=t==null?void 0:t.ai_stats)!=null&&ge.ai_attempts?Math.round(t.ai_stats.ai_successful_attempts/t.ai_stats.ai_attempts*100):0,z=(((be=t==null?void 0:t.solo_stats)==null?void 0:be.total_attempts)||0)+(((je=t==null?void 0:t.ai_stats)==null?void 0:je.ai_attempts)||0),U=(((ve=t==null?void 0:t.solo_stats)==null?void 0:ve.successful_attempts)||0)+(((Ne=t==null?void 0:t.ai_stats)==null?void 0:Ne.ai_successful_attempts)||0),X=z>0?Math.round(U/z*100):0,Ze=(t==null?void 0:t.duels_played)??0,Qe=(t==null?void 0:t.duels_won)??0,es=(t==null?void 0:t.live_played)??(t==null?void 0:t.matches_played)??0,ss=(t==null?void 0:t.live_won)??(t==null?void 0:t.matches_won)??0,H=Ze+es,te=Qe+ss,ts=H?Math.round(te/H*100):0,ae=v.find(s=>s.id===(n==null?void 0:n.id)),B=(ae==null?void 0:ae.rank)??null,[le,oe]=c.useState(!1),[as,re]=c.useState(!1),[de,me]=c.useState(null),[Ts,Ds]=c.useState(!1),ls=!0,[rs,xe]=c.useState([]),he=s=>{const l=`${Date.now()}-${Math.random().toString(36).slice(2)}`;xe(o=>[...o,{id:l,...s}]),setTimeout(()=>xe(o=>o.filter(i=>i.id!==l)),3500)},ns=async s=>{var l,o;try{me(s);const i=u.find(w=>w.id===s),r=await Y.post("/api/achievements/claim",{achievement_id:s}),a=((l=r==null?void 0:r.data)==null?void 0:l.xp_reward)??(i==null?void 0:i.xp_reward)??0,p=((o=r==null?void 0:r.data)==null?void 0:o.stars_reward)??(i==null?void 0:i.stars_reward)??0;he({name:(i==null?void 0:i.name)||"Achievement",xp:a,stars:p,icon_key:(i==null?void 0:i.icon_key)??void 0}),await V(!1)}catch(i){console.error("Claim failed",i)}finally{me(null)}},K=Is(((ye=t==null?void 0:t.totals)==null?void 0:ye.xp)||0),ne=Ke(((we=t==null?void 0:t.totals)==null?void 0:we.xp)||0),is=Ws(((_e=t==null?void 0:t.totals)==null?void 0:_e.xp)||0),cs=s=>s===1?{label:"Gold",className:"text-yellow-400",chip:"bg-yellow-500/15 border-yellow-700"}:s===2?{label:"Silver",className:"text-slate-200",chip:"bg-slate-400/10 border-slate-500"}:s===3?{label:"Bronze",className:"text-amber-500",chip:"bg-amber-500/10 border-amber-600"}:{label:"",className:"text-slate-300",chip:"bg-slate-800 border-slate-700"},R=({title:s,right:l,children:o,className:i=""})=>e.jsxs("section",{className:`bg-slate-800/50 border border-slate-700 rounded-2xl p-5 ${i}`,children:[e.jsxs("header",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold tracking-wide",children:s}),l]}),o]}),D=({icon:s,label:l,value:o})=>e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/60 border border-slate-700 rounded-xl px-4 py-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-800 border border-slate-700",children:e.jsx(s,{className:"h-5 w-5 text-cyan-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:l}),e.jsx("p",{className:"text-base font-semibold text-white",children:o})]})]}),os=({value:s})=>e.jsx("div",{className:"w-full h-3 rounded-full bg-slate-700 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-cyan-500 via-blue-500 to-fuchsia-500",style:{width:`${s}%`}})}),S=({title:s,value:l,icon:o,description:i,tone:r="slate"})=>{const a={slate:"bg-slate-900/60 border-slate-700 text-slate-200",green:"bg-emerald-900/30 border-emerald-800 text-emerald-300",indigo:"bg-indigo-900/30 border-indigo-800 text-indigo-300",amber:"bg-amber-900/30 border-amber-800 text-amber-300",rose:"bg-rose-900/30 border-rose-800 text-rose-300",purple:"bg-purple-900/30 border-purple-800 text-purple-300",cyan:"bg-cyan-900/30 border-cyan-800 text-cyan-300",blue:"bg-blue-900/30 border-blue-800 text-blue-300",yellow:"bg-yellow-900/30 border-yellow-800 text-yellow-300",red:"bg-red-900/30 border-red-800 text-red-300"};return e.jsx("div",{className:`rounded-xl border p-4 ${a[r]}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border bg-black/20",children:e.jsx(o,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:s}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:l}),i&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:i})]})]})})};return A?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950",children:e.jsxs(Re,{breadcrumbs:qe,children:[e.jsx(Xe,{title:"Dashboard"}),e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"h-8 w-8 animate-spin mx-auto mb-3 text-cyan-400"}),e.jsx("div",{className:"text-slate-300",children:"Loading your dashboard…"})]})})]})}):e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx(ps,{}),e.jsxs(Re,{breadcrumbs:qe,children:[e.jsx(Xe,{title:"Dashboard"}),e.jsx("div",{className:"px-6 pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(us,{className:"h-7 w-7 text-cyan-400"}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:["Welcome back, ",n==null?void 0:n.name,"!"]})]}),e.jsxs("p",{className:"text-slate-400",children:["Ready for your next coding challenge?",L&&e.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["• Updated ",L.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[B!=null&&e.jsx(D,{icon:Ye,label:"Rank",value:`#${B}`}),e.jsx(D,{icon:F,label:"Stars",value:y}),e.jsx(D,{icon:Oe,label:"Total XP",value:((ke=t==null?void 0:t.totals)==null?void 0:ke.xp)??0}),e.jsxs("button",{onClick:()=>re(!0),className:"inline-flex items-center gap-2 rounded-xl px-4 py-2 bg-slate-800 border border-slate-700 text-white hover:bg-slate-700",title:"View Achievements",children:[e.jsx(W,{className:"h-4 w-4 text-yellow-400"}),e.jsx("span",{children:"Achievements"})]})]})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[e.jsxs(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Level & Progress"})]}),right:e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"text-slate-400",children:"Next Level"}),e.jsxs("div",{className:"font-semibold text-cyan-300",children:[10-ne," XP needed"]})]}),children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-white text-lg font-semibold",children:["Level ",K]}),e.jsxs("span",{className:"text-xs text-slate-400",children:["(",ne,"/10 XP)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 w-full md:w-auto",children:[e.jsx(D,{icon:ie,label:"Attempts",value:(((Se=t==null?void 0:t.solo_stats)==null?void 0:Se.total_attempts)||0)+(((Ce=t==null?void 0:t.ai_stats)==null?void 0:Ce.ai_attempts)||0)}),e.jsx(D,{icon:Ue,label:"Success",value:`${X}%`}),e.jsx(D,{icon:ce,label:"Duels",value:H}),e.jsx(D,{icon:W,label:"Wins",value:te})]})]}),e.jsx(os,{value:Math.round(is)}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2",children:[e.jsxs("span",{children:["Level ",K]}),e.jsxs("span",{children:[ne," / 10 XP"]}),e.jsxs("span",{children:["Level ",K+1]})]})]}),e.jsxs(R,{title:"Your KPIs",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(S,{title:"Total XP",value:((Ae=t==null?void 0:t.totals)==null?void 0:Ae.xp)||0,icon:Oe,tone:"yellow"}),e.jsx(S,{title:"Total Attempts",value:(((Pe=t==null?void 0:t.solo_stats)==null?void 0:Pe.total_attempts)||0)+(((Le=t==null?void 0:t.ai_stats)==null?void 0:Le.ai_attempts)||0),icon:ie,tone:"blue"}),e.jsx(S,{title:"Solo Attempts",value:(($e=t==null?void 0:t.solo_stats)==null?void 0:$e.total_attempts)||0,icon:gs,tone:"indigo"}),e.jsx(S,{title:"AI Attempts",value:((Me=t==null?void 0:t.ai_stats)==null?void 0:Me.ai_attempts)||0,icon:Ns,tone:"cyan"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(S,{title:"Overall Success",value:`${X}%`,icon:Be,description:`${U} successful attempts`,tone:X>70?"green":X>50?"blue":"amber"}),e.jsx(S,{title:"Solo Success",value:`${h}%`,icon:Ue,description:`${((Ee=t==null?void 0:t.solo_stats)==null?void 0:Ee.successful_attempts)||0} successful solo attempts`,tone:h>70?"green":h>50?"blue":"amber"}),e.jsx(S,{title:"AI Success",value:`${$}%`,icon:js,description:`${((Ie=t==null?void 0:t.ai_stats)==null?void 0:Ie.ai_successful_attempts)||0} successful AI attempts`,tone:$>70?"green":$>50?"blue":"amber"})]})]}),e.jsx(R,{title:"Duel Performance",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(S,{title:"Stars Earned",value:y,icon:F,description:"Achievement stars",tone:"purple"}),e.jsx(S,{title:"Duels Played",value:H,icon:ce,description:"Total matches (invite + live)",tone:"red"}),e.jsx(S,{title:"Duels Won",value:te,icon:W,description:"Victories (invite + live)",tone:"green"}),e.jsx(S,{title:"Win Rate",value:`${ts}%`,icon:Be,description:"Success percentage",tone:"indigo"})]})}),e.jsx(R,{title:"Today's Activity",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-3 rounded-xl bg-blue-900/30 border border-blue-800 mb-2",children:e.jsx(ie,{className:"h-6 w-6 text-blue-300"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:((We=t==null?void 0:t.solo_stats)==null?void 0:We.attempts_today)||0}),e.jsx("p",{className:"text-sm text-slate-400",children:"Solo Attempts Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-3 rounded-xl bg-rose-900/30 border border-rose-800 mb-2",children:e.jsx(ce,{className:"h-6 w-6 text-rose-300"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(t==null?void 0:t.duels_today)||0}),e.jsx("p",{className:"text-sm text-slate-400",children:"Duels Started Today"})]})]})}),(t==null?void 0:t.language_stats)&&t.language_stats.length>0&&e.jsx(R,{title:"Language Proficiency",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols- gap-4",children:t.language_stats.map(s=>e.jsx(S,{title:s.language,value:`${s.winrate}%`,icon:bs,description:`${s.games_played} games played`,tone:s.winrate>70?"green":s.winrate>50?"blue":"amber"},s.id))})})]}),e.jsx("div",{className:"xl:col-span-1",children:e.jsxs(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Leaderboard"})]}),right:e.jsx("span",{className:"text-xs text-slate-400",children:"XP • Stars"}),className:"sticky top-4 z-10",children:[v.slice(0,3).length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:v.slice(0,3).map(s=>{const l=cs(s.rank);return e.jsxs("div",{className:`rounded-xl p-3 border ${l.chip} text-center`,children:[e.jsx("div",{className:"mt-2 mx-auto w-12 h-12 rounded-full overflow-hidden ring-1 ring-slate-700/60",children:e.jsx("img",{src:s.avatar||"/avatars/default.png",alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ye,{className:`h-5 w-5 ${l.className}`}),e.jsxs("span",{className:`text-sm font-semibold ${l.className}`,children:["#",s.rank]})]}),e.jsx("div",{className:"mt-1 text-white text-sm font-bold truncate",title:s.name,children:s.name}),e.jsxs("div",{className:"text-[11px] text-slate-400",children:["Lvl ",s.level]}),e.jsxs("div",{className:"mt-1 text-xs text-cyan-300",children:[s.total_xp," XP"]})]},s.id)})}),e.jsxs("div",{className:"divide-y divide-slate-700/70",children:[v.slice(3,12).map(s=>e.jsxs("div",{className:"py-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 text-center",children:e.jsxs("span",{className:`text-sm font-bold ${s.rank<=3?"text-yellow-400":"text-slate-300"}`,children:["#",s.rank]})}),e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden ring-1 ring-slate-700/60 shrink-0",children:e.jsx("img",{src:s.avatar||"/avatars/default.png",alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-white font-medium truncate ${s.id===(n==null?void 0:n.id)?"underline decoration-dotted":""}`,title:s.name,children:s.id===(n==null?void 0:n.id)?"You":s.name}),e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-cyan-900/40 border border-cyan-800 text-cyan-300",children:["Lvl ",s.level]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:[s.total_xp," XP • ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3 text-yellow-400"})," ",s.stars]})]})]})]},s.id)),v.length===0&&e.jsx("div",{className:"py-8 text-center text-slate-400",children:"No participants yet."})]}),B!=null&&B>12&&e.jsxs("div",{className:"mt-3 rounded-xl border border-cyan-800 bg-cyan-900/20 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Your Position"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 text-center",children:e.jsxs("span",{className:"text-sm font-bold text-cyan-300",children:["#",B]})}),e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden ring-1 ring-slate-700/60 shrink-0",children:e.jsx("img",{src:J(((Te=n==null?void 0:n.profile)==null?void 0:Te.avatar)??(n==null?void 0:n.avatar)??null)||"/avatars/default.png",alt:n==null?void 0:n.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium truncate",children:"You"}),e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-cyan-900/40 border border-cyan-800 text-cyan-300",children:["Lvl ",K]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:[((De=t==null?void 0:t.totals)==null?void 0:De.xp)??0," XP • ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3 text-yellow-400"})," ",y]})]})]})]})]})]})})]}),e.jsx(Es,{children:as&&e.jsxs(Ge.div,{className:"fixed inset-0 z-[100] flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>re(!1)}),e.jsxs(Ge.div,{className:"relative z-[71] w-full max-w-3xl mx-4 rounded-2xl border border-slate-700 bg-slate-900/95 shadow-2xl p-5",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.97,opacity:0},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-yellow-400"}),e.jsx("h3",{className:"text-white font-semibold tracking-wide",children:"Achievements"})]}),e.jsx("button",{onClick:()=>re(!1),className:"inline-flex items-center justify-center rounded-lg border border-slate-600 text-slate-200 hover:bg-slate-800 w-8 h-8",title:"Close",children:"✕"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"My Trophies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.filter(s=>s.claimed).length===0?e.jsx("span",{className:"text-slate-500 text-xs",children:"No trophies yet."}):u.filter(s=>s.claimed).map(s=>e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-700 bg-slate-900/60 px-2 py-1",children:[s.icon_key?e.jsx("img",{src:`/trophies/${s.icon_key}.svg`,alt:s.icon_key||"trophy",className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{className:"text-xs text-white truncate max-w-[220px]",title:s.name,children:s.name})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Tasks"}),e.jsx("button",{onClick:()=>oe(s=>!s),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-slate-600 text-slate-200 hover:bg-slate-800",children:le?"Hide Details":"Show Details"})]}),u.filter(s=>!s.claimed).length===0?e.jsx("div",{className:"text-slate-400 text-sm",children:"No tasks available."}):(()=>{const s=a=>{switch(a){case"Solo":return"bg-blue-900/30 border-blue-800 text-blue-300";case"Solo+AI":return"bg-indigo-900/30 border-indigo-800 text-indigo-300";case"Invite Duel":return"bg-rose-900/30 border-rose-800 text-rose-300";case"Live Match":return"bg-amber-900/30 border-amber-800 text-amber-300";case"Python":return"bg-emerald-900/30 border-emerald-800 text-emerald-300";case"Java":return"bg-orange-900/30 border-orange-800 text-orange-300";default:return"bg-slate-900/30 border-slate-700 text-slate-300"}},l=a=>a?a.startsWith("SOLO_AI_")?"Solo+AI":a.startsWith("SOLO_")?"Solo":a.startsWith("PVP_INVITE_")?"Invite Duel":a.startsWith("PVP_LIVE_")?"Live Match":a.startsWith("LANG_PY_")?"Python":a.startsWith("LANG_JAVA_")?"Java":"General":"General",o=a=>a.can_claim?3:a.unlocked?2:a.progress>0?1:0,i=[...u].filter(a=>!a.claimed).sort((a,p)=>{const w=o(p)-o(a);return w!==0?w:p.progress-a.progress}),r=le?i:i.slice(0,5);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto pr-1",children:r.map(a=>{const p=l(a.code);return e.jsx("div",{className:`rounded-xl border p-3 ${a.unlocked?"bg-yellow-900/10 border-yellow-800":"bg-slate-900/60 border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border bg-black/20",children:a.icon_key?e.jsx("img",{src:`/trophies/${a.icon_key}.svg`,className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",title:a.name,children:a.name}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${s(p)}`,children:p})]}),a.can_claim?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-amber-900/30 border border-amber-800 text-amber-300",children:"Ready to claim"}):a.unlocked?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-yellow-900/20 border border-yellow-800 text-yellow-300",children:"Completed"}):a.progress>0?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-cyan-900/30 border border-cyan-800 text-cyan-300",children:"In progress"}):e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-slate-800 border border-slate-600 text-slate-300",children:"Locked"})]}),a.description&&e.jsx("p",{className:"text-[11px] text-slate-400 mt-0.5 truncate",title:a.description,children:a.description}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full h-2 rounded-full bg-slate-700 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${a.unlocked?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-cyan-500 to-blue-500"}`,style:{width:`${a.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1",children:[e.jsxs("span",{children:[Math.min(a.current,a.threshold)," / ",a.threshold]}),e.jsxs("span",{children:[a.progress,"%"]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Reward: ",e.jsxs("span",{className:"text-white font-medium",children:["+",a.xp_reward," XP"]})," •"," ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3 text-yellow-400"})," ",a.stars_reward]})]}),a.can_claim&&e.jsx("button",{onClick:()=>ns(a.id),disabled:de===a.id,className:"text-[11px] inline-flex items-center gap-2 px-2.5 py-1 rounded-lg border border-yellow-700 bg-yellow-500/10 text-yellow-200 hover:bg-yellow-500/20 disabled:opacity-60",children:de===a.id?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-3.5 w-3.5 animate-spin"}),"Claiming…"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-3.5 w-3.5"}),"Claim"]})})]})]})]})]})},a.id)})}),i.length>5&&e.jsx("div",{className:"pt-3",children:e.jsx("button",{onClick:()=>oe(a=>!a),className:"w-full text-center text-xs px-3 py-2 rounded-lg border border-slate-600 text-slate-200 hover:bg-slate-800",children:le?"See less":"See all"})})]})})()]})]})]})}),e.jsx("div",{className:"fixed bottom-4 right-4 z-[60] space-y-2",children:rs.map(s=>e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-yellow-700 bg-slate-900/90 backdrop-blur px-4 py-3 shadow-lg",children:[e.jsx("div",{className:"p-2 rounded-lg border border-yellow-700 bg-yellow-500/10",children:s.icon_key?e.jsx("img",{src:`/trophies/${s.icon_key}.svg`,className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-sm text-white font-semibold truncate",title:s.name,children:["Achievement Unlocked: ",s.name]}),e.jsxs("p",{className:"text-xs text-slate-300",children:["+",s.xp," XP • ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3 text-yellow-400"})," ",s.stars]})]})]})]},s.id))})]})]})}export{et as default};
