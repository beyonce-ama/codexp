import{K as R,r,j as e,L as _,$ as D}from"./app-B-Uy0TEY.js";import{A as S,L as F,T as d,a as $}from"./app-layout-DC4TDIRC.js";import{L as B}from"./loader-circle-BDiQLd4t.js";import{R as G}from"./refresh-cw-BWL52SXf.js";import{U as J}from"./user-plus-BlSzQv0K.js";import{U as C,C as a}from"./users-CoQZ-hd6.js";import{E as Q}from"./eye-BzcbYzko.js";import{T as q}from"./trending-up-BRJqXs0P.js";import{C as z}from"./circle-check-big-7m5azMyH.js";import{c as I}from"./createLucideIcon-DGCsK7XD.js";import{C as K}from"./chart-column-CVHfzjXV.js";import{S as k,B as O}from"./x-C6TD3Nr3.js";import{S as W}from"./shield--RTAt1VI.js";import{T as V}from"./trophy-DN0H_k0L.js";import"./utils-jAU0Cazi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],Y=I("Gamepad",X),A=[{title:"Home",href:"/dashboard"},{title:"Admin",href:"/dashboard"}],Z=(n,o="slate")=>{const l={blue:"bg-blue-500/10 text-blue-300 border-blue-500/30",green:"bg-green-500/10 text-green-300 border-green-500/30",yellow:"bg-yellow-500/10 text-yellow-300 border-yellow-500/30",red:"bg-red-500/10 text-red-300 border-red-500/30",purple:"bg-purple-500/10 text-purple-300 border-purple-500/30",slate:"bg-white/5 text-slate-300 border-white/10"};return e.jsx("span",{className:`px-2 py-0.5 text-[11px] rounded-md border ${l[o]} inline-flex items-center gap-1`,children:n})};function s({icon:n,label:o,value:l,tone:c="slate",hint:x}){const m={blue:"ring-blue-500/20 hover:ring-blue-500/40",green:"ring-green-500/20 hover:ring-green-500/40",yellow:"ring-yellow-500/20 hover:ring-yellow-500/40",red:"ring-red-500/20 hover:ring-red-500/40",purple:"ring-purple-500/20 hover:ring-purple-500/40",slate:"ring-white/10 hover:ring-white/20"};return e.jsx("div",{className:`rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-4 transition ring-1 ${m[c]}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/5",children:e.jsx(n,{className:"h-5 w-5 text-white/90"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-white/60",children:o}),e.jsx("p",{className:"text-2xl font-bold text-white leading-none",children:l})]})]}),x?Z(x,c):null]})})}function h({title:n,right:o,children:l,className:c=""}){return e.jsxs("div",{className:c,children:[e.jsx("div",{className:"sticky top-6 z-10 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/70 border border-white/10 rounded-xl px-3 py-2 backdrop-blur supports-[backdrop-filter]:bg-slate-900/50",children:[e.jsx("div",{className:"flex items-center gap-2",children:n}),e.jsx("div",{className:"flex items-center gap-2",children:o})]})}),l]})}function je(){const{auth:n}=R().props,o=n==null?void 0:n.user,[l,c]=r.useState(null),[x,m]=r.useState(!0),[g,p]=r.useState(!1),[b,T]=r.useState(null),[ee,u]=r.useState(null),[j,L]=r.useState(!0),[w,U]=r.useState(!0),[v,P]=r.useState(!0),[f,E]=r.useState(!0),[y,H]=r.useState(!0),[le,se]=r.useState(!0),M=r.useMemo(()=>{if(!l)return"0%";const t=Number(l.total_solo_attempts||0),i=Number(l.successful_solo_attempts||0);return t<=0?"0%":`${Math.round(i/t*100)}%`},[l]);async function N(t=!1){try{u(null),t?p(!0):m(!0);const i=await $.get("/dashboard/stats");i!=null&&i.success&&(i!=null&&i.data)?(c(i.data),T(new Date)):u("Failed to load dashboard stats.")}catch(i){console.error(i),u("Unable to fetch data. Please try again.")}finally{m(!1),p(!1)}}return r.useEffect(()=>{N()},[]),x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950",children:e.jsxs(S,{breadcrumbs:A,children:[e.jsx(_,{title:"Admin"}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-300"}),e.jsx("div",{className:"text-gray-300",children:"Loading admin dashboard…"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950 relative",children:e.jsxs(S,{breadcrumbs:A,children:[e.jsx(_,{title:"Admin"}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-r from-blue-600/20 to-indigo-600/10 p-4 backdrop-blur",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/10 border border-white/10",children:e.jsx(F,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-white/80 text-sm",children:["Welcome back, ",(o==null?void 0:o.name)||"Admin",".",b&&e.jsxs("span",{className:"ml-2 text-white/60",children:["Updated ",b.toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>N(!0),disabled:g,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-500 disabled:opacity-50",children:[e.jsx(G,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{children:g?"Refreshing…":"Refresh"})]}),e.jsxs(D,{href:"/admin/users",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-500",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:"Manage Users"})]})]})]})}),e.jsx(h,{className:"mb-4",title:e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-5 w-5 text-blue-300"}),e.jsx("span",{className:"text-white font-semibold",children:"User Management"})]}),right:e.jsx("button",{onClick:()=>L(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:j?"Hide":"Show"}),children:j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(s,{icon:C,label:"Total Users",value:(l==null?void 0:l.total_users)??0,tone:"blue",hint:"All time"}),e.jsx(s,{icon:d,label:"Participants",value:(l==null?void 0:l.participant_users)??0,tone:"green",hint:"Active"}),e.jsx(s,{icon:Q,label:"Admins",value:(l==null?void 0:l.admin_users)??0,tone:"purple",hint:"Privileged"}),e.jsx(s,{icon:q,label:"New Today",value:(l==null?void 0:l.new_users_today)??0,tone:"yellow",hint:"24h"})]})}),e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-5 w-5 text-green-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Platform Activity"})]}),right:e.jsx("button",{onClick:()=>P(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:v?"Hide":"Show"}),children:v&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx(s,{icon:d,label:"Solo Attempts",value:(l==null?void 0:l.total_solo_attempts)??0,tone:"blue"}),e.jsx(s,{icon:z,label:"Success Rate",value:M,tone:"green"}),e.jsx(s,{icon:Y,label:"Active Duels",value:(l==null?void 0:l.pending_duels)??0,tone:"purple"})]})}),e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5 text-cyan-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Today's Activity"})]}),right:e.jsx("button",{onClick:()=>E(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:f?"Hide":"Show"}),children:f&&e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/10",children:e.jsx(d,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm text-white/90",children:"Solo Attempts"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:(l==null?void 0:l.solo_attempts_today)??0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/10",children:e.jsx(k,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm text-white/90",children:"New Duels"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:(l==null?void 0:l.duels_today)??0})]})]})}),e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"h-5 w-5 text-emerald-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Language Popularity"})]}),right:e.jsx("button",{onClick:()=>H(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:y?"Hide":"Show"}),children:y&&e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(s,{icon:a,label:"Python Attempts",value:(l==null?void 0:l.python_attempts)??0,tone:"blue"}),e.jsx(s,{icon:a,label:"Java Attempts",value:(l==null?void 0:l.java_attempts)??0,tone:"red"}),e.jsx(s,{icon:a,label:"C++ Attempts",value:(l==null?void 0:l.cpp_attempts)??0,tone:"purple"})]})}),e.jsx(h,{title:e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-5 w-5 text-yellow-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Challenge Management"})]}),right:e.jsx("button",{onClick:()=>U(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:w?"Hide":"Show"}),children:w&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white/70 mb-2",children:"Training Challenges"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:[e.jsx(s,{icon:O,label:"Total Solo",value:(l==null?void 0:l.total_solo_challenges)??0,tone:"slate"}),e.jsx(s,{icon:a,label:"Python",value:(l==null?void 0:l.solo_python_challenges)??0,tone:"blue"}),e.jsx(s,{icon:a,label:"Java",value:(l==null?void 0:l.solo_java_challenges)??0,tone:"red"}),e.jsx(s,{icon:a,label:"C++",value:(l==null?void 0:l.solo_cpp_challenges)??0,tone:"purple"}),e.jsx(s,{icon:d,label:"Easy",value:(l==null?void 0:l.solo_easy)??0,tone:"green"}),e.jsx(s,{icon:d,label:"Medium",value:(l==null?void 0:l.solo_medium)??0,tone:"yellow"}),e.jsx(s,{icon:d,label:"Hard",value:(l==null?void 0:l.solo_hard)??0,tone:"purple"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white/70 mb-2",children:"1v1 Challenges"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:[e.jsx(s,{icon:k,label:"Total 1v1",value:(l==null?void 0:l.total_1v1_challenges)??0,tone:"slate"}),e.jsx(s,{icon:a,label:"Python",value:(l==null?void 0:l.duel_python_challenges)??0,tone:"blue"}),e.jsx(s,{icon:a,label:"Java",value:(l==null?void 0:l.duel_java_challenges)??0,tone:"red"}),e.jsx(s,{icon:a,label:"C++",value:(l==null?void 0:l.duel_cpp_challenges)??0,tone:"purple"}),e.jsx(s,{icon:d,label:"Easy",value:(l==null?void 0:l.duel_easy)??0,tone:"green"}),e.jsx(s,{icon:d,label:"Medium",value:(l==null?void 0:l.duel_medium)??0,tone:"yellow"}),e.jsx(s,{icon:d,label:"Hard",value:(l==null?void 0:l.duel_hard)??0,tone:"purple"})]})]})]})})]})]})})}export{je as default};
