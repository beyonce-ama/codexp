import{K as $,r,j as e,L as C,$ as F}from"./app-GtahOJEu.js";import{A,L as G,T as o,a as B}from"./app-layout-BGU5i8aK.js";import{L as J}from"./loader-circle-BOZZkYrd.js";import{R as q}from"./refresh-cw-DYGCA0f-.js";import{U as O}from"./user-plus-BDo3SgBl.js";import{U as T,C as d}from"./users-DwpEitiw.js";import{E as Q}from"./eye-DdITcRoO.js";import{T as z}from"./trending-up-Cx33Ypqm.js";import{B as I,S as L}from"./x-CgTaxSWY.js";import{T as K}from"./trophy-x_z2y0vW.js";import{C as W}from"./circle-check-big-7tjGsxcN.js";import{c as V}from"./createLucideIcon-B9xt4YxH.js";import{M as X}from"./message-square-Cu5IRkg4.js";import{C as Y}from"./chart-column-BiyKGmra.js";import{S as Z}from"./shield-sDBW0TZT.js";import"./utils-jAU0Cazi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],se=V("Gamepad",ee),U=[{title:"Home",href:"/dashboard"},{title:"Admin",href:"/dashboard"}],u=(i,n="slate")=>{const s={blue:"bg-blue-500/10 text-blue-300 border-blue-500/30",green:"bg-green-500/10 text-green-300 border-green-500/30",yellow:"bg-yellow-500/10 text-yellow-300 border-yellow-500/30",red:"bg-red-500/10 text-red-300 border-red-500/30",purple:"bg-purple-500/10 text-purple-300 border-purple-500/30",slate:"bg-white/5 text-slate-300 border-white/10"};return e.jsx("span",{className:`px-2 py-0.5 text-[11px] rounded-md border ${s[n]} inline-flex items-center gap-1`,children:i})};function l({icon:i,label:n,value:s,tone:c="slate",hint:h}){const m={blue:"ring-blue-500/20 hover:ring-blue-500/40",green:"ring-green-500/20 hover:ring-green-500/40",yellow:"ring-yellow-500/20 hover:ring-yellow-500/40",red:"ring-red-500/20 hover:ring-red-500/40",purple:"ring-purple-500/20 hover:ring-purple-500/40",slate:"ring-white/10 hover:ring-white/20"};return e.jsx("div",{className:`rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-4 transition ring-1 ${m[c]}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/5",children:e.jsx(i,{className:"h-5 w-5 text-white/90"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-white/60",children:n}),e.jsx("p",{className:"text-2xl font-bold text-white leading-none",children:s})]})]}),h?u(h,c):null]})})}function x({title:i,right:n,children:s,className:c=""}){return e.jsxs("div",{className:c,children:[e.jsx("div",{className:"sticky top-6 z-10 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/70 border border-white/10 rounded-xl px-3 py-2 backdrop-blur supports-[backdrop-filter]:bg-slate-900/50",children:[e.jsx("div",{className:"flex items-center gap-2",children:i}),e.jsx("div",{className:"flex items-center gap-2",children:n})]})}),s]})}function fe(){const{auth:i}=$().props,n=i==null?void 0:i.user,[s,c]=r.useState(null),[h,m]=r.useState(!0),[g,b]=r.useState(!1),[j,P]=r.useState(null),[w,p]=r.useState(null),[f,M]=r.useState(!0),[v,D]=r.useState(!0),[N,E]=r.useState(!0),[y,H]=r.useState(!0),[_,R]=r.useState(!0),[le,te]=r.useState(!0),S=r.useMemo(()=>{if(!s)return"0%";const t=Number(s.total_solo_attempts||0),a=Number(s.successful_solo_attempts||0);return t<=0?"0%":`${Math.round(a/t*100)}%`},[s]);async function k(t=!1){try{p(null),t?b(!0):m(!0);const a=await B.get("/dashboard/stats");a!=null&&a.success&&(a!=null&&a.data)?(c(a.data),P(new Date)):p("Failed to load dashboard stats.")}catch(a){console.error(a),p("Unable to fetch data. Please try again.")}finally{m(!1),b(!1)}}return r.useEffect(()=>{k()},[]),h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950",children:e.jsxs(A,{breadcrumbs:U,children:[e.jsx(C,{title:"Admin"}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-300"}),e.jsx("div",{className:"text-gray-300",children:"Loading admin dashboard…"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950 relative",children:e.jsxs(A,{breadcrumbs:U,children:[e.jsx(C,{title:"Admin"}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-r from-blue-600/20 to-indigo-600/10 p-4 backdrop-blur",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/10 border border-white/10",children:e.jsx(G,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-white/80 text-sm",children:["Welcome back, ",(n==null?void 0:n.name)||"Admin",".",j&&e.jsxs("span",{className:"ml-2 text-white/60",children:["Updated ",j.toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u(`Success ${S}`,"green"),u(`${(s==null?void 0:s.pending_duels)??0} Active Duels`,"purple"),e.jsxs("button",{onClick:()=>k(!0),disabled:g,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-500 disabled:opacity-50",children:[e.jsx(q,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{children:g?"Refreshing…":"Refresh"})]}),e.jsxs(F,{href:"/admin/users",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-500",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{children:"Manage Users"})]})]})]})}),e.jsx(x,{className:"mb-4",title:e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-5 w-5 text-blue-300"}),e.jsx("span",{className:"text-white font-semibold",children:"User Management"})]}),right:e.jsx("button",{onClick:()=>M(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:f?"Hide":"Show"}),children:f&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(l,{icon:T,label:"Total Users",value:(s==null?void 0:s.total_users)??0,tone:"blue",hint:"All time"}),e.jsx(l,{icon:o,label:"Participants",value:(s==null?void 0:s.participant_users)??0,tone:"green",hint:"Active"}),e.jsx(l,{icon:Q,label:"Admins",value:(s==null?void 0:s.admin_users)??0,tone:"purple",hint:"Privileged"}),e.jsx(l,{icon:z,label:"New Today",value:(s==null?void 0:s.new_users_today)??0,tone:"yellow",hint:"24h"})]})}),e.jsx(x,{title:e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-5 w-5 text-yellow-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Challenge Management"})]}),right:e.jsx("button",{onClick:()=>D(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:v?"Hide":"Show"}),children:v&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white/70 mb-2",children:"Solo Challenges"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx(l,{icon:I,label:"Total Solo",value:(s==null?void 0:s.total_solo_challenges)??0,tone:"slate"}),e.jsx(l,{icon:d,label:"Python",value:(s==null?void 0:s.solo_python_challenges)??0,tone:"blue"}),e.jsx(l,{icon:d,label:"Java",value:(s==null?void 0:s.solo_java_challenges)??0,tone:"red"}),e.jsx(l,{icon:o,label:"Easy",value:(s==null?void 0:s.solo_easy)??0,tone:"green"}),e.jsx(l,{icon:o,label:"Medium",value:(s==null?void 0:s.solo_medium)??0,tone:"yellow"}),e.jsx(l,{icon:o,label:"Hard",value:(s==null?void 0:s.solo_hard)??0,tone:"purple"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white/70 mb-2",children:"1v1 Challenges"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx(l,{icon:L,label:"Total 1v1",value:(s==null?void 0:s.total_1v1_challenges)??0,tone:"slate"}),e.jsx(l,{icon:d,label:"Python",value:(s==null?void 0:s.duel_python_challenges)??0,tone:"blue"}),e.jsx(l,{icon:d,label:"Java",value:(s==null?void 0:s.duel_java_challenges)??0,tone:"red"}),e.jsx(l,{icon:o,label:"Easy",value:(s==null?void 0:s.duel_easy)??0,tone:"green"}),e.jsx(l,{icon:o,label:"Medium",value:(s==null?void 0:s.duel_medium)??0,tone:"yellow"}),e.jsx(l,{icon:o,label:"Hard",value:(s==null?void 0:s.duel_hard)??0,tone:"purple"})]})]})]})}),e.jsx(x,{title:e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-5 w-5 text-green-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Platform Activity"})]}),right:e.jsx("button",{onClick:()=>E(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:N?"Hide":"Show"}),children:N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(l,{icon:o,label:"Solo Attempts",value:(s==null?void 0:s.total_solo_attempts)??0,tone:"blue"}),e.jsx(l,{icon:W,label:"Success Rate",value:S,tone:"green"}),e.jsx(l,{icon:se,label:"Active Duels",value:(s==null?void 0:s.pending_duels)??0,tone:"purple"}),e.jsx(l,{icon:X,label:"Open Feedback",value:(s==null?void 0:s.open_feedbacks)??0,tone:"yellow"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(x,{title:e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-5 w-5 text-cyan-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Today's Activity"})]}),right:e.jsx("button",{onClick:()=>H(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:y?"Hide":"Show"}),children:y&&e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/5",children:e.jsx(o,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm text-white/90",children:"Solo Attempts"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:(s==null?void 0:s.solo_attempts_today)??0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/5",children:e.jsx(L,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm text-white/90",children:"New Duels"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:(s==null?void 0:s.duels_today)??0})]})]})}),e.jsx(x,{title:e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"h-5 w-5 text-emerald-300"}),e.jsx("span",{className:"text-white font-semibold",children:"Language Popularity"})]}),right:e.jsx("button",{onClick:()=>R(t=>!t),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 text-slate-200 hover:bg-white/5",children:_?"Hide":"Show"}),children:_&&e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/5",children:e.jsx(d,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm text-white/90",children:"Python Attempts"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:(s==null?void 0:s.python_attempts)??0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border border-white/10 bg-white/5",children:e.jsx(d,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"text-sm text-white/90",children:"Java Attempts"})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:(s==null?void 0:s.java_attempts)??0})]})]})})]}),e.jsxs("div",{className:"text-xs text-white/50",children:[typeof(s==null?void 0:s.total_characters)=="number"&&e.jsxs("span",{children:["Total Characters Generated: ",s.total_characters]}),w&&e.jsx("span",{className:"ml-3 text-red-300",children:w})]})]})]})})}export{fe as default};
