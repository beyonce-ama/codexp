import{K as He,r as o,j as e,L as Re}from"./app-BoFfaJ_o.js";import{a as F,T as ze,C as Ue,b as c,A as De}from"./app-layout-C7QwUaEo.js";import{S as p}from"./sweetalert2.esm.all-acGi8jXx.js";import{A as Ye}from"./AnimatedBackground-BMEAK-Cl.js";import{C as D}from"./crown--g5oyQSn.js";import{S as I}from"./sparkles-De3aBi9N.js";import{T as Oe}from"./triangle-alert-BIp-BhtY.js";import{C as We}from"./users-DW72oryo.js";import{L as Ve}from"./lightbulb-CT-TntvY.js";import{B as Ze,a as Je}from"./x-CkHSHnU4.js";import{R as pe}from"./refresh-cw-8XYXQmO5.js";import{S as Ke}from"./send-BK_DJXPA.js";import{C as Qe}from"./cpu-C3FELwAm.js";import{T as et}from"./trophy-COF-g64d.js";import{C as tt}from"./circle-check-big-DKqHTW9q.js";import{Z as he}from"./zap-BjJlVqjO.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-B-heTNhy.js";const st=[{title:"Home",href:"/dashboard"},{title:"Practice",href:"#"},{title:"AI Challenges",href:"/play/ai-challenges"}];function St(){const{auth:M}=He().props,n=M==null?void 0:M.user,[at,lt]=o.useState(!1),[Y,O]=o.useState(!1),[w,W]=o.useState(!1),[rt,V]=o.useState(!0),[g,fe]=o.useState("python"),[j,ge]=o.useState("easy"),[N,ve]=o.useState(""),[ye,be]=o.useState([]),[d,Z]=o.useState(null),[v,T]=o.useState(""),[P,J]=o.useState(null),[C,$]=o.useState(0),[_,G]=o.useState(!1),[S,q]=o.useState(!1),[h,X]=o.useState(null),[ot,H]=o.useState(!1),[m,A]=o.useState(null),[k,K]=o.useState([]),[we,Q]=o.useState(!1),[je,ee]=o.useState(!1),[Ne,te]=o.useState(!1),[Ce,se]=o.useState(!1),[_e,ae]=o.useState(!1),[Se,le]=o.useState(!1),[nt,R]=o.useState(!1),Ae=t=>t==="cpp"?"C++":(t??"").toUpperCase(),[z,U]=o.useState(!1),ke=()=>{const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},re=()=>{var t;document.fullscreenElement&&((t=document.exitFullscreen)==null||t.call(document))};o.useEffect(()=>(z?document.body.classList.add("solo-open"):document.body.classList.remove("solo-open"),()=>document.body.classList.remove("solo-open")),[z]);const E=o.useRef(),Ee=async()=>{try{const t={difficulty:d==null?void 0:d.difficulty,language:g,topic:N||void 0,is_correct:!0,hint_used:_,time_spent_sec:Math.max(0,parseInt(String(C),10)||0),code_submitted:v};console.log("Sending rewards payload:",t);const a=await F.post("/api/ai-challenges/submit-attempt",t);if(console.log("Rewards API response:",a),a.success&&a.data){const s=a.data;return console.log("Backend data received:",s),A(l=>l&&{...l,total_xp:s.total_xp||l.total_xp,ai_successful_attempts:s.ai_successful_attempts||l.ai_successful_attempts,ai_attempts:s.ai_attempts||l.ai_attempts}),s.xp_earned||0}else throw console.warn("Backend response indicates failure:",a),new Error(a.message||"Backend response was not successful")}catch(t){throw console.error("Failed to apply rewards - full error:",t),t}},y=t=>Math.floor(t/10)+1,L=t=>10-t%10,oe=t=>t%10/10*100,ne=t=>t%10;o.useEffect(()=>{Be(),Le()},[g]),o.useEffect(()=>{let t;return P&&d&&(t=setInterval(()=>{$(Math.floor((Date.now()-P.getTime())/1e3))},1e3)),()=>{t&&clearInterval(t)}},[P,d]),o.useEffect(()=>{if(k.length>0){const t=()=>{K(a=>a.map(s=>({...s,x:s.x+s.vx,y:s.y+s.vy,vy:s.vy-.15,life:s.life-1,size:s.size*.99})).filter(s=>s.life>0)),k.length>0&&(E.current=requestAnimationFrame(t))};E.current=requestAnimationFrame(t)}return()=>{E.current&&cancelAnimationFrame(E.current)}},[k.length]);const Le=async()=>{var t,a;try{V(!0);const s=await F.get("/api/me/stats");if(s.success&&s.data){const l=s.data,i=((t=l.totals)==null?void 0:t.xp)||0,x=l.ai_stats||{};A({ai_attempts:x.ai_attempts||l.ai_attempts||0,ai_successful_attempts:x.ai_successful_attempts||l.ai_successful_attempts||0,total_xp:i,total_stars:((a=l.totals)==null?void 0:a.stars)||0,current_level:y(i),xp_to_next_level:L(i),streak:l.streak||0})}else console.warn("Failed to fetch stats:",s.message),A({ai_attempts:(n==null?void 0:n.ai_attempts)||0,ai_successful_attempts:(n==null?void 0:n.ai_successful_attempts)||0,total_xp:(n==null?void 0:n.total_xp)||0,total_stars:0,current_level:y((n==null?void 0:n.total_xp)||0),xp_to_next_level:L((n==null?void 0:n.total_xp)||0),streak:0})}catch(s){console.error("Error fetching user stats:",s),A({ai_attempts:(n==null?void 0:n.ai_attempts)||0,ai_successful_attempts:(n==null?void 0:n.ai_successful_attempts)||0,total_xp:(n==null?void 0:n.total_xp)||0,total_stars:0,current_level:y((n==null?void 0:n.total_xp)||0),xp_to_next_level:L((n==null?void 0:n.total_xp)||0),streak:0})}finally{V(!1)}},ie=(t,a,s="success")=>{const l={success:["#10B981","#34D399","#6EE7B7","#FBBF24","#F59E0B"],levelup:["#8B5CF6","#A78BFA","#C4B5FD","#F59E0B","#FBBF24"],streak:["#EF4444","#F87171","#FCA5A5","#FBBF24","#F59E0B"]},i=[],x=s==="levelup"?25:15;for(let r=0;r<x;r++){const u=Math.PI*2*r/x,f=Math.random()*8+4;i.push({id:Date.now()+r,x:t+(Math.random()-.5)*50,y:a+(Math.random()-.5)*30,vx:Math.cos(u)*f+(Math.random()-.5)*2,vy:Math.sin(u)*f-Math.random()*3,life:80+Math.random()*40,maxLife:80,color:l[s][Math.floor(Math.random()*l[s].length)],size:Math.random()*6+3,type:s})}K(r=>[...r,...i])},Be=async()=>{try{const t=await F.get("/api/ai-challenges/topics",{language:g});t.success&&t.data&&be(t.data)}catch(t){console.error("Error fetching topics:",t)}},Fe=async()=>{try{O(!0),c.play("click");const t={language:g,difficulty:j};N&&(t.topic=N);const a=await F.post("/api/ai-challenges/generate",t);if(a.success&&a.data){const s={...a.data,language:g,difficulty:j};Z(s),T(a.data.buggy_code||""),J(new Date),$(0),G(!1),q(!1),X(null),H(!1),R(!1),c.play("success"),U(!0),ke(),p.fire({icon:"success",title:"Challenge Generated!",text:"Your AI-generated challenge is ready. Good luck!",timer:2e3,showConfirmButton:!1,background:"#1f2937",color:"#fff"})}else throw new Error(a.message||"Failed to generate challenge")}catch(t){console.error("Error generating challenge:",t),c.play("failure"),p.fire({icon:"error",title:"Generation Failed",text:t instanceof Error?t.message:"Unable to generate challenge. Please try again.",background:"#1f2937",color:"#fff"})}finally{O(!1)}},ce=()=>{U(!1),Ge(),re()},Ie=async()=>{!(d!=null&&d.fixed_code)||!(await p.fire({icon:"warning",title:"Surrender & Show Answer?",html:'<p class="text-gray-200">You will NOT receive any rewards for this challenge.</p>',showCancelButton:!0,confirmButtonText:"Yes, show the answer",cancelButtonText:"Cancel",background:"#1f2937",color:"#fff",confirmButtonColor:"#ef4444"})).isConfirmed||(R(!0),c.play("click"),await p.fire({title:"AI Generated Solution",html:`
                <div class="correct-answer-modal">
                    <p class="mb-4 text-gray-300">No rewards granted for surrendered challenges.</p>
                    <div class="bg-gray-900 rounded-lg p-4 text-left">
                        <pre class="text-green-400 text-sm overflow-auto max-h-64" style="font-family: 'Courier New', monospace; white-space: pre-wrap;">${d.fixed_code}</pre>
                    </div>
                </div>
            `,didOpen:()=>{const a=document.getElementById("ai-solution-surrender");a&&(a.textContent=d.fixed_code)},confirmButtonText:"Close",background:"#1f2937",color:"#fff",confirmButtonColor:"#10B981",width:"600px"}),ce(),re())},de=(t,a)=>{const s=t.length,l=a.length;if(s===0)return l===0?1:0;if(l===0)return 0;const i=Array(l+1).fill(null).map(()=>Array(s+1).fill(null));for(let r=0;r<=s;r++)i[0][r]=r;for(let r=0;r<=l;r++)i[r][0]=r;for(let r=1;r<=l;r++)for(let u=1;u<=s;u++)t[u-1]===a[r-1]?i[r][u]=i[r-1][u-1]:i[r][u]=Math.min(i[r-1][u]+1,i[r][u-1]+1,i[r-1][u-1]+1);const x=Math.max(s,l);return(x-i[l][s])/x},Me=(t,a)=>{var ue,xe;const s=t.trim(),l=(ue=a.fixed_code)==null?void 0:ue.trim();if(!s)return console.log("AI Challenge validation: FAIL - No code provided"),!1;if(!l)return console.log("AI Challenge validation: FAIL - No solution available"),!1;if(s===((xe=a.buggy_code)==null?void 0:xe.trim()))return console.log("AI Challenge validation: FAIL - No changes made from original buggy code"),!1;if(s.length<20)return console.log("AI Challenge validation: FAIL - Code too short (minimum 20 characters)"),!1;const i=Xe=>Xe.replace(/\r\n/g,`
`).replace(/\s+/g," ").replace(/\s*;\s*/g,";").replace(/\s*\{\s*/g,"{").replace(/\s*\}\s*/g,"}").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*==\s*/g,"==").replace(/\s*=\s*/g,"=").trim(),x=i(s),r=i(l);if(x===r)return console.log("AI Challenge validation: PASS - Exact match with AI solution (100%)"),!0;const f=de(x,r),b=Math.round(f*100);console.log(`AI Challenge validation: FAIL - Only ${b}% similarity with AI solution (requires 100%)`);const me=f>=1;return console.log(`AI Challenge validation: ${me?"PASS":"FAIL"} (${b}% similarity, requires 100%)`),me},Te=async()=>{if(!d||!v.trim()){c.play("failure"),p.fire("Error","Please write some code before submitting.","error");return}try{W(!0),c.play("typing");const t=Me(v,d),a=de(v.trim().replace(/\s+/g," "),d.fixed_code.trim().replace(/\s+/g," "));if(X({isCorrect:t,similarity:a}),q(!0),t)try{const s=await Ee(),l=(m==null?void 0:m.total_xp)||0,i=l+s,x=y(l),r=y(i),u=r>x;c.play("success"),ee(!0),se(!0),ae(!0),le(!0),setTimeout(()=>le(!1),2e3);const f=window.innerWidth/2,b=window.innerHeight/2;ie(f,b,"success"),u&&setTimeout(()=>{c.play("levelup"),Q(!0),ie(f,b-100,"levelup")},1e3),setTimeout(()=>{c.play("victory")},500),await p.fire({title:"AI CHALLENGE MASTERED!",html:`
                            <div class="text-center">
                            <div class="text-5xl mb-4">ü§ñüèÜ</div>
                            <p class="mb-3 text-lg font-semibold text-cyan-200">
                                Exceptional! You've conquered this AI-generated challenge!
                            </p>
                            
                            <div class="bg-blue-900/30 border border-blue-500/40 rounded-lg p-4 mb-4">
                                <div class="text-2xl font-bold text-green-400">100% Perfect Match</div>
                                <div class="text-sm text-gray-200 opacity-80">AI Solution Mastery!</div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div class="bg-gray-900/40 rounded-lg p-3">
                                <div class="text-lg font-bold text-yellow-300">+${s.toFixed(1)}</div>
                                <div class="text-xs text-gray-300">XP Earned</div>
                                </div>
                                <div class="bg-gray-900/40 rounded-lg p-3">
                                <div class="text-lg font-bold text-purple-300">Level ${r}</div>
                                <div class="text-xs text-gray-300">Current Level</div>
                                </div>
                            </div>

                            <div class="text-sm text-gray-300">
                                ‚è±Ô∏è Completed in ${Math.floor(C/60)}m ${C%60}s
                            </div>

                            ${u?`
                                <div class="mt-4 text-center">
                                <div class="text-lg font-bold text-pink-400 animate-pulse">‚ú® LEVEL UP! ‚ú®</div>
                                <p class="text-sm text-gray-200">
                                    You've reached Level ${r}! 
                                    Next: ${L(i)} XP needed.
                                </p>
                                </div>
                            `:""}
                            </div>
                        `,timer:6e3,timerProgressBar:!0,showConfirmButton:!0,confirmButtonText:"Generate New Challenge!",background:"linear-gradient(135deg, #1e3a8a 0%, #312e81 100%)",color:"#fff",confirmButtonColor:"#10B981"}),ce(),setTimeout(()=>{ee(!1),se(!1),Q(!1),ae(!1)},7e3)}catch(s){console.error("Reward application failed:",s),c.play("failure"),p.fire({icon:"warning",title:"Completed but rewards failed",text:"Challenge completed but there was an issue applying rewards. Please check your connection and try again.",background:"#1f2937",color:"#fff"})}else c.play("failure"),te(!0),setTimeout(()=>te(!1),600),await p.fire({title:"Almost There!",html:`
                        <div class="text-center">
                        <div class="text-5xl mb-4">‚ö†Ô∏è</div>
                        <p class="mb-3 text-lg font-semibold text-red-200">
                            Your solution must exactly match the AI-generated answer.
                        </p>
                        
                        <div class="bg-red-900/30 border border-red-500/40 rounded-lg p-4 mb-4">
                            <div class="text-lg font-bold text-yellow-300">${Math.round(a*100)}% Match</div>
                            <div class="text-sm text-gray-200 opacity-80">Need 100% for Success</div>
                        </div>

                        <div class="bg-gray-900/40 rounded-lg p-3 text-left text-sm text-gray-200">
                            <div class="font-medium text-yellow-400 mb-1">üí° Tips:</div>
                            <ul class="list-disc list-inside space-y-1">
                            <li>Ensure your code is at least 20 characters long</li>
                            <li>Don't just copy the buggy version</li>
                            <li>Whitespace, symbols & punctuation matter</li>
                            </ul>
                        </div>
                        </div>
                    `,timer:4500,showConfirmButton:!0,confirmButtonText:"Try Again",background:"linear-gradient(135deg, #1e3a8a 0%, #312e81 100%)",color:"#fff",confirmButtonColor:"#3B82F6"})}catch(t){console.error("Error submitting solution:",t),c.play("failure");let a="Failed to submit your solution. Please try again.";t instanceof Error&&(a=t.message),p.fire("Error",a,"error")}finally{W(!1)}},Pe=(t,a)=>{p.fire({title:t,html:`
      <div>
        <p class="mb-3 text-gray-300">100% match required:</p>
        <div class="bg-gray-900 rounded-lg p-4 text-left">
          <pre id="swal-code"
               class="text-green-400 text-sm overflow-auto"
               style="
                 font-family:'Courier New',monospace;
                 white-space: pre;      /* keep indentation and angle brackets */
                 max-height: 70vh;      /* taller */
                 max-width: 90vw;       /* responsive */
               "></pre>
        </div>
      </div>
    `,width:900,background:"#1f2937",color:"#fff",confirmButtonText:"Got it!",confirmButtonColor:"#10B981",didOpen:()=>{var l;const s=(l=p.getHtmlContainer())==null?void 0:l.querySelector("#swal-code");s&&(s.textContent=a)}})},$e=()=>{d!=null&&d.fixed_code&&(c.play("click"),H(!0),Pe("AI Generated Solution",d.fixed_code),p.fire({title:"AI Generated Solution",html:`
                    <div class="correct-answer-modal">
                        <p class="mb-4 text-gray-300">Here's the AI-generated solution (100% match required):</p>
                        <div class="bg-gray-900 rounded-lg p-4 text-left">
                            <pre class="text-green-400 text-sm overflow-auto max-h-64" style="font-family: 'Courier New', monospace; white-space: pre-wrap;">${d.fixed_code}</pre>
                        </div>
                        <p class="mt-4 text-sm text-gray-400">Your code must match this exactly to pass the challenge.</p>
                    </div>
                `,didOpen:()=>{const t=document.getElementById("ai-solution");t&&(t.textContent=d.fixed_code)},confirmButtonText:"Got it!",background:"#1f2937",color:"#fff",confirmButtonColor:"#10B981",width:"600px"}))},Ge=()=>{c.play("click"),Z(null),T(""),J(null),$(0),G(!1),q(!1),X(null),H(!1),R(!1),U(!1)},qe=t=>{const a=Math.floor(t/60),s=t%60;return`${a}:${s.toString().padStart(2,"0")}`},B=({title:t,value:a,icon:s,color:l,animated:i=!1})=>e.jsx("div",{className:`
                bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 
                ${i?"animate-pulse glow-effect":""} 
                hover:scale-105 hover:shadow-xl transition-all duration-300 
                ${_e?"glow-success":""}
                cursor-pointer
            `,onMouseEnter:()=>c.play("hover"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${l} transition-all duration-300`,children:e.jsx(s,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:t}),e.jsx("p",{className:"text-lg font-bold text-white",children:a})]})]})});return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(Ye,{}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-purple-400 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-1 h-1 bg-cyan-400 rounded-full animate-pulse opacity-30"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-3 h-3 bg-pink-400 rounded-full animate-bounce opacity-10"}),k.map(t=>e.jsx("div",{className:"absolute pointer-events-none particle-effect",style:{left:`${t.x}px`,top:`${t.y}px`,backgroundColor:t.color,width:`${t.size}px`,height:`${t.size}px`,borderRadius:"50%",opacity:t.life/t.maxLife,boxShadow:`0 0 ${t.size}px ${t.color}`}},t.id))]}),we&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/80 to-pink-900/80 backdrop-blur-md z-50 flex items-center justify-center animate-fadeIn",children:e.jsxs("div",{className:"text-center text-white animate-bounceIn levelup-container",children:[e.jsxs("div",{className:"crown-animation mb-6",children:[e.jsx(D,{className:"w-24 h-24 mx-auto text-yellow-400 animate-spin-slow"}),e.jsx("div",{className:"crown-glow"})]}),e.jsx("h2",{className:"text-8xl font-bold mb-4 bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 bg-clip-text text-transparent animate-pulse",children:"LEVEL UP!"}),e.jsxs("p",{className:"text-3xl opacity-90 animate-slideInUp",children:["You reached Level ",m==null?void 0:m.current_level,"!"]}),e.jsx("div",{className:"mt-6 animate-slideInUp delay-300",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/20 px-6 py-3 rounded-full backdrop-blur-sm",children:[e.jsx(I,{className:"w-5 w-5 text-yellow-400"}),e.jsxs("span",{className:"text-lg font-semibold",children:["Only ",m==null?void 0:m.xp_to_next_level," XP to next level!"]}),e.jsx(I,{className:"w-5 w-5 text-yellow-400"})]})})]})}),z&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-900/95 border border-gray-700/50 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[e.jsx(ze,{className:"h-6 w-6 mr-2"}),d.title]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[e.jsx(Ue,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:qe(C)})]}),e.jsxs("button",{onClick:Ie,className:"flex items-center space-x-2 px-4 py-2 bg-red-600/80 text-white rounded-lg hover:bg-red-600 transition-colors",onMouseEnter:()=>c.play("hover"),children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Surrender & Show Answer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/80",children:"Language"}),e.jsx("div",{className:"text-lg font-bold text-white",children:Ae(g)})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/80",children:"Difficulty"}),e.jsx("div",{className:"text-lg font-bold capitalize",children:j})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/80",children:"Reward"}),e.jsx("div",{className:"text-xs text-white/80",children:_?"Hint used (-0.5 XP)":"No hint bonus"})]})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-cyan-400 font-bold mb-3 flex items-center",children:[e.jsx(We,{className:"h-5 w-5 mr-2"}),"Challenge Description"]}),e.jsx("p",{className:"text-gray-200 leading-relaxed",children:d.description})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-yellow-400 font-bold flex items-center",children:[e.jsx(Ve,{className:"h-5 w-5 mr-2"}),"Hint"]}),!_&&e.jsx("button",{onClick:()=>{G(!0),c.play("click")},className:"px-3 py-1 bg-yellow-600/20 text-yellow-300 rounded-lg text-sm hover:bg-yellow-600/30 transition-colors",onMouseEnter:()=>c.play("hover"),children:"Show Hint"})]}),_?e.jsx("p",{className:"text-yellow-200",children:d.hint}):e.jsx("p",{className:"text-gray-400 italic",children:'Click "Show Hint" if you need help but it will less your xp rewards'})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-cyan-400 font-bold mb-3",children:"Your Solution"}),e.jsx("textarea",{value:v,onChange:t=>T(t.target.value),className:"w-full h-96 p-4 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-200 font-mono text-sm resize-none transition-all duration-300",placeholder:"Fix the bugs in this code..."}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[S&&!(h!=null&&h.isCorrect)&&e.jsxs("button",{onClick:$e,disabled:w,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 transition-all duration-300 font-medium shadow-lg hover:scale-105",onMouseEnter:()=>c.play("hover"),children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{children:"Show AI Solution"})]}),S&&h&&e.jsx("div",{className:"text-sm text-gray-400",children:h.isCorrect?e.jsx("span",{className:"text-green-400 font-medium",children:"‚úÖ Perfect 100% match!"}):e.jsxs("span",{className:"text-yellow-400 font-medium",children:["üìä ",Math.round(h.similarity*100),"% similarity (need 100%)"]})})]}),e.jsx("div",{className:"flex items-center space-x-3",children:(!S||!(h!=null&&h.isCorrect))&&e.jsxs("button",{onClick:Te,disabled:w||!v.trim(),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg hover:from-green-600 hover:to-blue-700 disabled:opacity-50 transition-all duration-300 font-medium shadow-lg hover:scale-105",onMouseEnter:()=>c.play("hover"),children:[w?e.jsx(pe,{className:"h-5 w-5 animate-spin"}):e.jsx(Ke,{className:"h-5 w-5"}),e.jsx("span",{children:w?"Submitting...":S?"Try Again":"Submit Solution"})]})})]})]})]})})]})}),e.jsxs(De,{breadcrumbs:st,children:[e.jsx(Re,{title:"AI Generated Challenges"}),e.jsxs("div",{className:`flex flex-col gap-6 p-4 relative z-10 ${Ne?"animate-shake":""}`,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:`h-8 w-8 text-purple-400 ${Ce?"animate-spin":""} transition-all duration-300`}),e.jsx(I,{className:"h-6 w-6 text-yellow-400"}),e.jsx(Qe,{className:"h-8 w-8 text-cyan-400"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"AI CHALLENGES"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Unique coding challenges created by artificial intelligence"})]})]})}),m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"h-6 w-6 text-yellow-400"}),e.jsxs("span",{className:"text-xl font-bold text-white",children:["Level ",m.current_level]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["(",ne(m.total_xp),"/10 XP)"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Next Level"}),e.jsxs("div",{className:"text-cyan-400 font-bold",children:[m.xp_to_next_level," XP needed"]})]})]}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 overflow-hidden relative",children:[e.jsx("div",{className:`bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-500 h-4 rounded-full transition-all duration-1000 ease-out progress-bar-glow ${Se?"animate-pulse":""}`,style:{width:`${oe(m.total_xp)}%`},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold text-white drop-shadow-lg",children:[Math.round(oe(m.total_xp)),"%"]})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[e.jsxs("span",{children:["Level ",m.current_level]}),e.jsxs("span",{children:[ne(m.total_xp)," / 10 XP"]}),e.jsxs("span",{children:["Level ",m.current_level+1]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(B,{title:"Level",value:m.current_level,icon:D,color:"bg-orange-500"}),e.jsx(B,{title:"Total XP",value:m.total_xp||0,icon:et,color:"bg-yellow-500"}),e.jsx(B,{title:"AI Completed",value:m.ai_successful_attempts||0,icon:tt,color:"bg-purple-500",animated:je}),e.jsx(B,{title:"Streak",value:m.streak||0,icon:he,color:"bg-cyan-500"})]})]}),e.jsx("div",{className:"max-w-4xl mx-auto w-full",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(he,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Generate Your AI Challenge"}),e.jsx("p",{className:"text-gray-400",children:"Configure your preferences and let AI create a unique coding challenge"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Programming Language"}),e.jsxs("select",{value:g,onChange:t=>fe(t.target.value),className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-200 transition-all duration-300",onMouseEnter:()=>c.play("hover"),children:[e.jsx("option",{value:"python",children:"Python"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"cpp",children:"C++"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Level"}),e.jsxs("select",{value:j,onChange:t=>ge(t.target.value),className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-200 transition-all duration-300",onMouseEnter:()=>c.play("hover"),children:[e.jsx("option",{value:"easy",children:"Easy (3.0 XP)"}),e.jsx("option",{value:"medium",children:"Medium (4.0 XP)"}),e.jsx("option",{value:"hard",children:"Hard (6.0 XP)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Topic (Optional)"}),e.jsxs("select",{value:N,onChange:t=>ve(t.target.value),className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-200 transition-all duration-300",onMouseEnter:()=>c.play("hover"),children:[e.jsx("option",{value:"",children:"Random Topic"}),ye.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:Fe,disabled:Y,className:"inline-flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-xl hover:from-purple-600 hover:to-pink-700 disabled:opacity-50 transition-all duration-300 font-bold text-lg shadow-lg hover:scale-105",onMouseEnter:()=>c.play("hover"),children:Y?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Generating Challenge..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-6 w-6"}),e.jsx("span",{children:"Generate AI Challenge"})]})})})]})})]})]}),e.jsx("style",{children:`
            /* When the Solo challenge modal is open, completely hide the header */
body.solo-open header {
  opacity: 0 !important;
  pointer-events: none !important;
}


            `})]})}export{St as default};
