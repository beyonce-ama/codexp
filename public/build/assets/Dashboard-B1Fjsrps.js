import{K as ls,r as p,j as e,L as ye}from"./app-GtahOJEu.js";import{a as w,A as we,T as E}from"./app-layout-BGU5i8aK.js";import{A as rs}from"./AnimatedBackground-CN_pJb0B.js";import{L as _e}from"./loader-circle-BOZZkYrd.js";import{A as is}from"./activity-CXGPfj3a.js";import{S as _,U as cs,C as ns}from"./users-DwpEitiw.js";import{Z as Se}from"./zap-CcCAyFdu.js";import{C as ke}from"./circle-check-big-7tjGsxcN.js";import{S as V,a as os}from"./x-CgTaxSWY.js";import{T as f}from"./trophy-x_z2y0vW.js";import{C as ds}from"./crown-DYshOr_b.js";import{C as ms}from"./cpu-CNciYivm.js";import{T as Ae}from"./trending-up-Cx33Ypqm.js";import{c as xs}from"./createLucideIcon-B9xt4YxH.js";import"./utils-jAU0Cazi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],hs=xs("Medal",ps),Le=[{title:"Home",href:"/dashboard"},{title:"Dashboard",href:"/dashboard"}],us=b=>Math.floor(b/10)+1,Pe=b=>b%10,gs=b=>Pe(b)/10*100;function Ws(){var R,Q,ee,se,te,ae,le,re,ie,ce,ne,oe,de,me,xe,pe,he,ue,ge,be,je,fe;const{auth:b}=ls().props,C=b==null?void 0:b.user,[t,Ce]=p.useState(null),[S,$e]=p.useState([]),[Te,X]=p.useState(!0),[bs,Me]=p.useState(!1),[B,We]=p.useState(null),[N,Ie]=p.useState([]),[js,De]=p.useState(0),Ee=s=>{switch(s){case"Solo":return"bg-blue-900/30 border-blue-800 text-blue-300";case"Solo+AI":return"bg-indigo-900/30 border-indigo-800 text-indigo-300";case"Invite Duel":return"bg-rose-900/30 border-rose-800 text-rose-300";case"Live Match":return"bg-amber-900/30 border-amber-800 text-amber-300";case"Python":return"bg-emerald-900/30 border-emerald-800 text-emerald-300";case"Java":return"bg-orange-900/30 border-orange-800 text-orange-300";default:return"bg-slate-900/30 border-slate-700 text-slate-300"}},Ve=s=>{if(!s)return null;const l=String(s).trim();return/^(https?:\/\/|data:)/i.test(l)||l.startsWith("/")?l:l.startsWith("avatars/")||l.startsWith("storage/")?`/${l}`:`/avatars/${l}`},F=s=>s?s.startsWith("SOLO_AI_")?"Solo+AI":s.startsWith("SOLO_")?"Solo":s.startsWith("PVP_INVITE_")?"Invite Duel":s.startsWith("PVP_LIVE_")?"Live Match":s.startsWith("LANG_PY_")?"Python":s.startsWith("LANG_JAVA_")?"Java":"General":"General",Xe=s=>s&&typeof s=="object"&&("code"in s||"threshold"in s||"xp_reward"in s||"name"in s||"goal"in s),Be=s=>{const l=Number(s.threshold??s.goal??0),i=Number(s.current??s.count??0),a=s.progress!=null?Number(s.progress):l>0?Math.min(100,Math.round(i/l*100)):0,r=Number.isFinite(a)?Math.max(0,Math.min(100,a)):0,n=l>0&&i>=l||r>=100,m=!!(s.claimed??s.is_claimed??!1),u=!!(s.unlocked??n),o=!!(s.can_claim??(u&&!m)),g=s.code??s.key??s.name??"",L=s.name??s.title??s.code,P=s.description??s.desc,x=s.icon_key??s.icon,c=s.xp_reward??s.xp,h=s.stars_reward??s.stars,y=s.scope??s.category??s.group;return{id:Number.isFinite(Number(s.id))?Number(s.id):void 0,code:String(g),name:String(L??"Achievement"),description:P??void 0,icon_key:x??null,threshold:l,current:i,progress:r,unlocked:u,claimed:m,can_claim:o,xp_reward:Number(c??0),stars_reward:Number(h??0),__scope:y??F(String(g))}},Fe=s=>{const l=[],i=r=>{if(!r)return;if(Array.isArray(r)){r.forEach(i);return}if(typeof r!="object")return;if(Xe(r)){l.push(Be(r));return}const n=[r.items,r.achievements,r.tasks,r.groups,r.categories,r.data].filter(Boolean);n.length?n.forEach(i):Object.values(r).forEach(i)};i(s);const a=new Set;return l.filter(r=>{const n=r.id!=null?`id:${r.id}`:`code:${r.code}|scope:${r.__scope??""}`;return a.has(n)?!1:(a.add(n),!0)})};p.useEffect(()=>{U(!0)},[]);const U=async(s=!1)=>{var l,i,a,r,n;try{s&&X(!0);const[m,u,o]=await Promise.all([w.get("/api/me/stats"),w.get("/api/users/participants"),w.get("/api/achievements/progress")]),g=((l=o==null?void 0:o.data)==null?void 0:l.items)??((i=o==null?void 0:o.data)==null?void 0:i.data)??(o==null?void 0:o.data)??o,L=Fe(g);if(Ie(L),He){const P=L.filter(x=>x.can_claim);for(const x of P)try{const c=await w.post("/api/achievements/claim",{achievement_id:x.id}),h=((a=c==null?void 0:c.data)==null?void 0:a.xp_reward)??x.xp_reward??0,y=((r=c==null?void 0:c.data)==null?void 0:r.stars_reward)??x.stars_reward??0;K({name:x.name,xp:h,stars:y,icon_key:x.icon_key??void 0})}catch(c){console.error("Auto-claim failed",x.id,c)}}if(De(Number((g==null?void 0:g.solo_completed)??(g==null?void 0:g.completed)??((n=o==null?void 0:o.data)==null?void 0:n.solo_completed)??0)),m!=null&&m.success&&m.data&&(Ce(m.data),We(new Date)),u!=null&&u.success&&Array.isArray(u.data)){const x=u.data.map(c=>{var ve,Ne;const h=Number(c.total_xp??0),y=(ve=c.user)==null?void 0:ve.stars,ss=c.stars,ts=Number(y??ss??0),as=Ve(c.avatar??((Ne=c.profile)==null?void 0:Ne.avatar)??null);return{id:c.id,name:c.name,email:c.email,avatar:as,total_xp:h,stars:ts,level:Math.floor(h/10)+1}}).sort((c,h)=>h.total_xp-c.total_xp||h.stars-c.stars).map((c,h)=>({...c,rank:h+1}));$e(x)}}catch(m){console.error("Error fetching dashboard/leaderboard:",m)}finally{X(!1),Me(!1)}},O=((R=t==null?void 0:t.user)==null?void 0:R.stars)??((Q=t==null?void 0:t.totals)==null?void 0:Q.stars)??0,$=(ee=t==null?void 0:t.solo_stats)!=null&&ee.total_attempts?Math.round(t.solo_stats.successful_attempts/t.solo_stats.total_attempts*100):0,T=(se=t==null?void 0:t.ai_stats)!=null&&se.ai_attempts?Math.round(t.ai_stats.ai_successful_attempts/t.ai_stats.ai_attempts*100):0,z=(((te=t==null?void 0:t.solo_stats)==null?void 0:te.total_attempts)||0)+(((ae=t==null?void 0:t.ai_stats)==null?void 0:ae.ai_attempts)||0),G=(((le=t==null?void 0:t.solo_stats)==null?void 0:le.successful_attempts)||0)+(((re=t==null?void 0:t.ai_stats)==null?void 0:re.ai_successful_attempts)||0),k=z>0?Math.round(G/z*100):0,Ue=(t==null?void 0:t.duels_played)??0,Oe=(t==null?void 0:t.duels_won)??0,ze=(t==null?void 0:t.live_played)??(t==null?void 0:t.matches_played)??0,Ge=(t==null?void 0:t.live_won)??(t==null?void 0:t.matches_won)??0,A=Ue+ze,M=Oe+Ge,qe=A?Math.round(M/A*100):0,[q,Je]=p.useState(!0),[J,Y]=p.useState(null),[W,Ye]=p.useState(!1),He=!0,[Ke,H]=p.useState([]),K=s=>{const l=`${Date.now()}-${Math.random().toString(36).slice(2)}`;H(i=>[...i,{id:l,...s}]),setTimeout(()=>H(i=>i.filter(a=>a.id!==l)),3500)},Ze=async s=>{var l,i;try{Y(s);const a=N.find(u=>u.id===s),r=await w.post("/api/achievements/claim",{achievement_id:s}),n=((l=r==null?void 0:r.data)==null?void 0:l.xp_reward)??(a==null?void 0:a.xp_reward)??0,m=((i=r==null?void 0:r.data)==null?void 0:i.stars_reward)??(a==null?void 0:a.stars_reward)??0;K({name:(a==null?void 0:a.name)||"Achievement",xp:n,stars:m,icon_key:(a==null?void 0:a.icon_key)??void 0}),await U(!1)}catch(a){console.error("Claim failed",a)}finally{Y(null)}},I=us(((ie=t==null?void 0:t.totals)==null?void 0:ie.xp)||0),D=Pe(((ce=t==null?void 0:t.totals)==null?void 0:ce.xp)||0),Re=gs(((ne=t==null?void 0:t.totals)==null?void 0:ne.xp)||0),Qe=s=>s===1?{label:"Gold",className:"text-yellow-400",chip:"bg-yellow-500/15 border-yellow-700"}:s===2?{label:"Silver",className:"text-slate-200",chip:"bg-slate-400/10 border-slate-500"}:s===3?{label:"Bronze",className:"text-amber-500",chip:"bg-amber-500/10 border-amber-600"}:{label:"",className:"text-slate-300",chip:"bg-slate-800 border-slate-700"},j=({title:s,right:l,children:i,className:a=""})=>e.jsxs("section",{className:`bg-slate-800/50 border border-slate-700 rounded-2xl p-5 ${a}`,children:[e.jsxs("header",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold tracking-wide",children:s}),l]}),i]}),v=({icon:s,label:l,value:i})=>e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/60 border border-slate-700 rounded-xl px-4 py-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-800 border border-slate-700",children:e.jsx(s,{className:"h-5 w-5 text-cyan-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:l}),e.jsx("p",{className:"text-base font-semibold text-white",children:i})]})]}),es=({value:s})=>e.jsx("div",{className:"w-full h-3 rounded-full bg-slate-700 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-cyan-500 via-blue-500 to-fuchsia-500",style:{width:`${s}%`}})}),d=({title:s,value:l,icon:i,description:a,tone:r="slate"})=>{const n={slate:"bg-slate-900/60 border-slate-700 text-slate-200",green:"bg-emerald-900/30 border-emerald-800 text-emerald-300",indigo:"bg-indigo-900/30 border-indigo-800 text-indigo-300",amber:"bg-amber-900/30 border-amber-800 text-amber-300",rose:"bg-rose-900/30 border-rose-800 text-rose-300",purple:"bg-purple-900/30 border-purple-800 text-purple-300",cyan:"bg-cyan-900/30 border-cyan-800 text-cyan-300",blue:"bg-blue-900/30 border-blue-800 text-blue-300",yellow:"bg-yellow-900/30 border-yellow-800 text-yellow-300",red:"bg-red-900/30 border-red-800 text-red-300"};return e.jsx("div",{className:`rounded-xl border p-4 ${n[r]}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border bg-black/20",children:e.jsx(i,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:s}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:l}),a&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:a})]})]})})},Z=({icon_key:s})=>s?e.jsx("img",{src:`/trophies/${s}.svg`,alt:s||"trophy",className:"h-5 w-5"}):e.jsx(f,{className:"h-5 w-5 text-yellow-400"});return Te?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950",children:e.jsxs(we,{breadcrumbs:Le,children:[e.jsx(ye,{title:"Dashboard"}),e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"h-8 w-8 animate-spin mx-auto mb-3 text-cyan-400"}),e.jsx("div",{className:"text-slate-300",children:"Loading your dashboard…"})]})})]})}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(rs,{}),e.jsxs(we,{breadcrumbs:Le,children:[e.jsx(ye,{title:"Dashboard"}),e.jsx("div",{className:"px-6 pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(is,{className:"h-7 w-7 text-cyan-400"}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:["Welcome back, ",C==null?void 0:C.name,"!"]})]}),e.jsxs("p",{className:"text-slate-400",children:["Ready for your next coding challenge?",B&&e.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["• Updated ",B.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{icon:_,label:"Stars",value:O}),e.jsx(v,{icon:Se,label:"Total XP",value:((oe=t==null?void 0:t.totals)==null?void 0:oe.xp)??0})]})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[e.jsxs(j,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Level & Progress"})]}),right:e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"text-slate-400",children:"Next Level"}),e.jsxs("div",{className:"font-semibold text-cyan-300",children:[10-D," XP needed"]})]}),children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-white text-lg font-semibold",children:["Level ",I]}),e.jsxs("span",{className:"text-xs text-slate-400",children:["(",D,"/10 XP)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 w-full md:w-auto",children:[e.jsx(v,{icon:E,label:"Attempts",value:(((de=t==null?void 0:t.solo_stats)==null?void 0:de.total_attempts)||0)+(((me=t==null?void 0:t.ai_stats)==null?void 0:me.ai_attempts)||0)}),e.jsx(v,{icon:ke,label:"Success",value:`${k}%`}),e.jsx(v,{icon:V,label:"Duels",value:A}),e.jsx(v,{icon:f,label:"Wins",value:M})]})]}),e.jsx(es,{value:Math.round(Re)}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2",children:[e.jsxs("span",{children:["Level ",I]}),e.jsxs("span",{children:[D," / 10 XP"]}),e.jsxs("span",{children:["Level ",I+1]})]})]}),e.jsxs(j,{title:"Your KPIs",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(d,{title:"Total XP",value:((xe=t==null?void 0:t.totals)==null?void 0:xe.xp)||0,icon:Se,tone:"yellow"}),e.jsx(d,{title:"Total Attempts",value:(((pe=t==null?void 0:t.solo_stats)==null?void 0:pe.total_attempts)||0)+(((he=t==null?void 0:t.ai_stats)==null?void 0:he.ai_attempts)||0),icon:E,tone:"blue"}),e.jsx(d,{title:"Solo Attempts",value:((ue=t==null?void 0:t.solo_stats)==null?void 0:ue.total_attempts)||0,icon:cs,tone:"indigo"}),e.jsx(d,{title:"AI Attempts",value:((ge=t==null?void 0:t.ai_stats)==null?void 0:ge.ai_attempts)||0,icon:ms,tone:"cyan"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(d,{title:"Overall Success",value:`${k}%`,icon:Ae,description:`${G} successful attempts`,tone:k>70?"green":k>50?"blue":"amber"}),e.jsx(d,{title:"Solo Success",value:`${$}%`,icon:ke,description:`${((be=t==null?void 0:t.solo_stats)==null?void 0:be.successful_attempts)||0} successful solo attempts`,tone:$>70?"green":$>50?"blue":"amber"}),e.jsx(d,{title:"AI Success",value:`${T}%`,icon:os,description:`${((je=t==null?void 0:t.ai_stats)==null?void 0:je.ai_successful_attempts)||0} successful AI attempts`,tone:T>70?"green":T>50?"blue":"amber"})]})]}),e.jsx(j,{title:"Duel Performance",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(d,{title:"Stars Earned",value:O,icon:_,description:"Achievement stars",tone:"purple"}),e.jsx(d,{title:"Duels Played",value:A,icon:V,description:"Total matches (invite + live)",tone:"red"}),e.jsx(d,{title:"Duels Won",value:M,icon:f,description:"Victories (invite + live)",tone:"green"}),e.jsx(d,{title:"Win Rate",value:`${qe}%`,icon:Ae,description:"Success percentage",tone:"indigo"})]})}),e.jsx(j,{title:"Today's Activity",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-3 rounded-xl bg-blue-900/30 border border-blue-800 mb-2",children:e.jsx(E,{className:"h-6 w-6 text-blue-300"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:((fe=t==null?void 0:t.solo_stats)==null?void 0:fe.attempts_today)||0}),e.jsx("p",{className:"text-sm text-slate-400",children:"Solo Attempts Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-3 rounded-xl bg-rose-900/30 border border-rose-800 mb-2",children:e.jsx(V,{className:"h-6 w-6 text-rose-300"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(t==null?void 0:t.duels_today)||0}),e.jsx("p",{className:"text-sm text-slate-400",children:"Duels Started Today"})]})]})}),(t==null?void 0:t.language_stats)&&t.language_stats.length>0&&e.jsx(j,{title:"Language Proficiency",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols- gap-4",children:t.language_stats.map(s=>e.jsx(d,{title:s.language,value:`${s.winrate}%`,icon:ns,description:`${s.games_played} games played`,tone:s.winrate>70?"green":s.winrate>50?"blue":"amber"},s.id))})})]}),e.jsxs("div",{className:"xl:col-span-1",children:[e.jsxs(j,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Achievements"})]}),right:e.jsx("button",{onClick:()=>Je(s=>!s),className:"text-xs inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-slate-600 text-slate-200 hover:bg-slate-800",children:q?"Hide Tasks":"Show Tasks"}),className:"sticky top-6 mb-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"My Trophies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.filter(s=>s.claimed).length===0?e.jsx("span",{className:"text-slate-500 text-xs",children:"No trophies yet."}):N.filter(s=>s.claimed).map(s=>e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-700 bg-slate-900/60 px-2 py-1",children:[e.jsx(Z,{icon_key:s.icon_key}),e.jsx("span",{className:"text-xs text-white truncate max-w-[160px]",title:s.name,children:s.name})]},s.id))})]})}),q&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Tasks"}),N.filter(s=>!s.claimed).length===0?e.jsx("div",{className:"text-slate-400 text-sm",children:"No tasks available."}):(()=>{const s=a=>a.can_claim?3:a.unlocked?2:a.progress>0?1:0,l=[...N].filter(a=>!a.claimed).sort((a,r)=>{const n=s(r)-s(a);return n!==0?n:r.progress-a.progress}),i=W?l:l.slice(0,5);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:i.map(a=>{const r=F(a.code);return e.jsx("div",{className:`rounded-xl border p-3 ${a.unlocked?"bg-yellow-900/10 border-yellow-800":"bg-slate-900/60 border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg border bg-black/20",children:e.jsx(Z,{icon_key:a.icon_key})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",title:a.name,children:a.name}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Ee(r)}`,children:r})]}),a.can_claim?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-amber-900/30 border border-amber-800 text-amber-300",children:"Ready to claim"}):a.unlocked?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-yellow-900/20 border border-yellow-800 text-yellow-300",children:"Completed"}):a.progress>0?e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-cyan-900/30 border border-cyan-800 text-cyan-300",children:"In progress"}):e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-slate-800 border border-slate-600 text-slate-300",children:"Locked"})]}),a.description&&e.jsx("p",{className:"text-[11px] text-slate-400 mt-0.5 truncate",title:a.description,children:a.description}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full h-2 rounded-full bg-slate-700 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${a.unlocked?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-cyan-500 to-blue-500"}`,style:{width:`${a.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1",children:[e.jsxs("span",{children:[Math.min(a.current,a.threshold)," / ",a.threshold]}),e.jsxs("span",{children:[a.progress,"%"]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Reward: ",e.jsxs("span",{className:"text-white font-medium",children:["+",a.xp_reward," XP"]})," •"," ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3 text-yellow-400"})," ",a.stars_reward]})]}),a.can_claim&&e.jsx("button",{onClick:()=>Ze(a.id),disabled:J===a.id,className:"text-[11px] inline-flex items-center gap-2 px-2.5 py-1 rounded-lg border border-yellow-700 bg-yellow-500/10 text-yellow-200 hover:bg-yellow-500/20 disabled:opacity-60",children:J===a.id?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"h-3.5 w-3.5 animate-spin"}),"Claiming…"]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-3.5 w-3.5"}),"Claim"]})})]})]})]})]})},a.id)})}),(l.length>5||W)&&e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:()=>Ye(a=>!a),className:"w-full text-center text-xs px-3 py-2 rounded-lg border border-slate-600 text-slate-200 hover:bg-slate-800",children:W?"See less":"See all"})})]})})()]})})]}),e.jsxs(j,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Leaderboard"})]}),right:e.jsx("span",{className:"text-xs text-slate-400",children:"XP • Stars"}),className:"sticky top-6",children:[S.slice(0,3).length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:S.slice(0,3).map(s=>{const l=Qe(s.rank);return e.jsxs("div",{className:`rounded-xl p-3 border ${l.chip} text-center`,children:[e.jsx("div",{className:"mt-2 mx-auto w-12 h-12 rounded-full overflow-hidden ring-1 ring-slate-700/60",children:e.jsx("img",{src:s.avatar||"/avatars/default.png",alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(hs,{className:`h-5 w-5 ${l.className}`}),e.jsxs("span",{className:`text-sm font-semibold ${l.className}`,children:["#",s.rank]})]}),e.jsx("div",{className:"mt-1 text-white text-sm font-bold truncate",title:s.name,children:s.name}),e.jsxs("div",{className:"text-[11px] text-slate-400",children:["Lvl ",s.level]}),e.jsxs("div",{className:"mt-1 text-xs text-cyan-300",children:[s.total_xp," XP"]})]},s.id)})}),e.jsxs("div",{className:"divide-y divide-slate-700/70",children:[S.slice(0,15).map(s=>e.jsxs("div",{className:"py-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 text-center",children:e.jsxs("span",{className:`text-sm font-bold ${s.rank<=3?"text-yellow-400":"text-slate-300"}`,children:["#",s.rank]})}),e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden ring-1 ring-slate-700/60 shrink-0",children:e.jsx("img",{src:s.avatar||"/avatars/default.png",alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium truncate",title:s.name,children:s.name}),e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-cyan-900/40 border border-cyan-800 text-cyan-300",children:["Lvl ",s.level]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:[s.total_xp," XP • ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3 text-yellow-400"})," ",s.stars]})]})]})]},s.id)),S.length===0&&e.jsx("div",{className:"py-8 text-center text-slate-400",children:"No participants yet."})]})]})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 z-[60] space-y-2",children:Ke.map(s=>e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-yellow-700 bg-slate-900/90 backdrop-blur px-4 py-3 shadow-lg",children:[e.jsx("div",{className:"p-2 rounded-lg border border-yellow-700 bg-yellow-500/10",children:s.icon_key?e.jsx("img",{src:`/trophies/${s.icon_key}.svg`,className:"h-5 w-5"}):e.jsx(f,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-sm text-white font-semibold truncate",title:s.name,children:["Achievement Unlocked: ",s.name]}),e.jsxs("p",{className:"text-xs text-slate-300",children:["+",s.xp," XP • ",e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3 text-yellow-400"})," ",s.stars]})]})]})]},s.id))})]})]})}export{Ws as default};
