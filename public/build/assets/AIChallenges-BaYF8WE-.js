import{K as $e,r as o,j as e,L as Re}from"./app-BJhQd_PZ.js";import{a as N,T as Xe,C as qe,b as d,A as ze,S as g}from"./app-layout-Dle9PyH0.js";import{A as De}from"./AnimatedBackground-D4Tfl3W2.js";import{C as H}from"./crown-BRqejXGR.js";import{S as L}from"./sparkles-dcyrORPX.js";import{T as He}from"./triangle-alert-Df00j_ld.js";import{C as Ue}from"./users-BBAKaOU6.js";import{L as Ge}from"./lightbulb-CDEcUafz.js";import{R as he}from"./refresh-cw-CxWP3tcZ.js";import{S as Ye}from"./send-tgPyFjpZ.js";import{a as Oe}from"./x-D63ij1Yn.js";import{C as Qe}from"./cpu-B7SyA3xv.js";import{T as Ve}from"./trophy-_adu0j5O.js";import{C as We}from"./circle-check-big-CXiULuHG.js";import{Z as Ze}from"./zap-BcfkSNOI.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-BKKyVU85.js";const Je=[{title:"Home",href:"/dashboard"},{title:"Practice",href:"#"},{title:"AI Challenges",href:"/play/ai-challenges"}];function wt(){const{auth:F}=$e().props,n=F==null?void 0:F.user,[Ke,et]=o.useState(!1),[U,G]=o.useState(!1),[M,Y]=o.useState(!1),[tt,O]=o.useState(!0),[p,ge]=o.useState("python"),[v,fe]=o.useState("easy"),[_,be]=o.useState(""),[ve,ye]=o.useState([]),[m,Q]=o.useState(null),[f,B]=o.useState(""),[I,V]=o.useState(null),[y,P]=o.useState(0),[C,T]=o.useState(!1),[$,R]=o.useState(!1),[b,X]=o.useState(null),[st,W]=o.useState(!1),[c,S]=o.useState(null),[k,Z]=o.useState([]),[we,J]=o.useState(!1),[je,K]=o.useState(!1),[Ne,ee]=o.useState(!1),[_e,te]=o.useState(!1),[Ce,se]=o.useState(!1),[Se,ae]=o.useState(!1),[at,q]=o.useState(!1),ke=t=>t==="cpp"?"C++":(t??"").toUpperCase(),[z,le]=o.useState(!1),Ae=()=>{const t=document.documentElement;try{if(document.fullscreenElement)return;if(t.requestFullscreen)return t.requestFullscreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen();if(t.msRequestFullscreen)return t.msRequestFullscreen()}catch{}},re=()=>{document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen().catch(()=>{})};o.useEffect(()=>(z?document.body.classList.add("solo-open"):document.body.classList.remove("solo-open"),()=>document.body.classList.remove("solo-open")),[z]);const A=o.useRef(),Ee=async()=>{try{const t={difficulty:m==null?void 0:m.difficulty,language:p,topic:_||void 0,is_correct:!0,hint_used:C,time_spent_sec:Math.max(0,parseInt(String(y),10)||0),code_submitted:f};console.log("Sending rewards payload:",t);const a=await N.post("/api/ai-challenges/submit-attempt",t);if(console.log("Rewards API response:",a),a.success&&a.data){const s=a.data;return console.log("Backend data received:",s),S(r=>r&&{...r,total_xp:s.total_xp||r.total_xp,ai_successful_attempts:s.ai_successful_attempts||r.ai_successful_attempts,ai_attempts:s.ai_attempts||r.ai_attempts}),s.xp_earned||0}else throw console.warn("Backend response indicates failure:",a),new Error(a.message||"Backend response was not successful")}catch(t){throw console.error("Failed to apply rewards - full error:",t),t}},w=t=>Math.floor(t/10)+1,E=t=>10-t%10,oe=t=>t%10/10*100,ne=t=>t%10;o.useEffect(()=>{Le(),ie()},[p]),o.useEffect(()=>{let t;return I&&m&&(t=setInterval(()=>{P(Math.floor((Date.now()-I.getTime())/1e3))},1e3)),()=>{t&&clearInterval(t)}},[I,m]),o.useEffect(()=>{if(k.length>0){const t=()=>{Z(a=>a.map(s=>({...s,x:s.x+s.vx,y:s.y+s.vy,vy:s.vy-.15,life:s.life-1,size:s.size*.99})).filter(s=>s.life>0)),k.length>0&&(A.current=requestAnimationFrame(t))};A.current=requestAnimationFrame(t)}return()=>{A.current&&cancelAnimationFrame(A.current)}},[k.length]);const ie=async()=>{var t,a;try{O(!0);const s=await N.get("/api/me/stats");if(s.success&&s.data){const r=s.data,i=((t=r.totals)==null?void 0:t.xp)||0,x=r.ai_stats||{};S({ai_attempts:x.ai_attempts||r.ai_attempts||0,ai_successful_attempts:x.ai_successful_attempts||r.ai_successful_attempts||0,total_xp:i,total_stars:((a=r.totals)==null?void 0:a.stars)||0,current_level:w(i),xp_to_next_level:E(i),streak:r.streak||0})}else console.warn("Failed to fetch stats:",s.message),S({ai_attempts:(n==null?void 0:n.ai_attempts)||0,ai_successful_attempts:(n==null?void 0:n.ai_successful_attempts)||0,total_xp:(n==null?void 0:n.total_xp)||0,total_stars:0,current_level:w((n==null?void 0:n.total_xp)||0),xp_to_next_level:E((n==null?void 0:n.total_xp)||0),streak:0})}catch(s){console.error("Error fetching user stats:",s),S({ai_attempts:(n==null?void 0:n.ai_attempts)||0,ai_successful_attempts:(n==null?void 0:n.ai_successful_attempts)||0,total_xp:(n==null?void 0:n.total_xp)||0,total_stars:0,current_level:w((n==null?void 0:n.total_xp)||0),xp_to_next_level:E((n==null?void 0:n.total_xp)||0),streak:0})}finally{O(!1)}},ce=(t,a,s="success")=>{const r={success:["#10B981","#34D399","#6EE7B7","#FBBF24","#F59E0B"],levelup:["#8B5CF6","#A78BFA","#C4B5FD","#F59E0B","#FBBF24"],streak:["#EF4444","#F87171","#FCA5A5","#FBBF24","#F59E0B"]},i=[],x=s==="levelup"?25:15;for(let l=0;l<x;l++){const u=Math.PI*2*l/x,h=Math.random()*8+4;i.push({id:Date.now()+l,x:t+(Math.random()-.5)*50,y:a+(Math.random()-.5)*30,vx:Math.cos(u)*h+(Math.random()-.5)*2,vy:Math.sin(u)*h-Math.random()*3,life:80+Math.random()*40,maxLife:80,color:r[s][Math.floor(Math.random()*r[s].length)],size:Math.random()*6+3,type:s})}Z(l=>[...l,...i])},Le=async()=>{try{const t=await N.get("/api/ai-challenges/topics",{language:p});t.success&&t.data&&ye(t.data)}catch(t){console.error("Error fetching topics:",t)}},Fe=async()=>{try{G(!0),d.play("click"),Ae();const t={language:p,difficulty:v};_&&(t.topic=_);const a=await N.post("/api/ai-challenges/generate",t);if(a.success&&a.data){const s={...a.data,language:p,difficulty:v};Q(s),B(a.data.buggy_code||""),V(new Date),P(0),T(!1),R(!1),X(null),W(!1),q(!1),d.play("success"),le(!0)}else throw new Error(a.message||"Failed to generate challenge")}catch(t){console.error("Error generating challenge:",t),d.play("failure"),g.fire({icon:"error",title:"Generation Failed",text:t instanceof Error?t.message:"Unable to generate challenge. Please try again.",background:"#1f2937",color:"#fff"})}finally{G(!1)}},de=()=>{le(!1),document.body.classList.remove("solo-open"),re(),setTimeout(()=>{Q(null),B(""),V(null),P(0),T(!1),R(!1),X(null),W(!1),q(!1)},0)},Me=async()=>{if(!(!(m!=null&&m.fixed_code)||!(await g.fire({title:"",html:`
      <div class="text-center space-y-3">
        <div class="text-5xl text-red-400 font-bold mb-2">!</div>
        <h2 class="text-2xl font-bold text-red-400">Quit & Show Answer?</h2>
        <p class="text-gray-300 text-sm mt-2">
          Are you sure you want to quit this challenge?<br/>
          <span class="text-red-300 font-semibold">You will NOT receive any rewards.</span>
        </p>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Yes, Show Answer",cancelButtonText:"Cancel",background:"#1f2937",color:"#f8fafc",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",width:450,padding:"2rem 1.5rem",customClass:{popup:"rounded-xl border border-gray-700/50 shadow-xl",htmlContainer:"p-0",confirmButton:"px-5 py-2 rounded-lg font-semibold",cancelButton:"px-5 py-2 rounded-lg font-semibold"}})).isConfirmed)){q(!0),d.play("click");try{const a={language:p,difficulty:v,time_spent_sec:Math.max(0,parseInt(String(y),10)||0),code_submitted:f||void 0};await N.post("/api/ai-challenges/surrender",a),await ie()}catch(a){console.error("Failed to record surrender:",a)}await g.fire({title:"",html:`
      <div class="text-center mb-4">
        <h2 class="text-xl font-bold text-red-400 mb-1">You Quit the Challenge</h2>
        <p class="text-gray-300 text-sm">Here‚Äôs the correct solution üí°</p>
      </div>

      <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 text-left">
        <div class="mb-3 flex items-center justify-between border-b border-gray-700 pb-2">
          <span class="text-yellow-400 font-semibold">üèÜ ${(m==null?void 0:m.title)??"Solution"}</span>
          <span class="text-xs text-gray-400 italic">100% match required</span>
        </div>
        <pre id="ai-solution-surrender"
             class="text-green-400 text-sm font-mono whitespace-pre-wrap break-words max-h-[50vh] overflow-y-auto"
             style="margin:0;"></pre>
      </div>

      <p class="mt-4 text-xs text-gray-400 text-center">
        Reminder: comments, spacing, and punctuation also matter.
      </p>
    `,width:600,background:"#1f2937",color:"#f8fafc",confirmButtonText:"Close",confirmButtonColor:"#10B981",customClass:{popup:"rounded-xl border border-gray-700/50 shadow-xl backdrop-blur-sm",htmlContainer:"p-0",confirmButton:"px-6 py-2 rounded-lg font-semibold"},didOpen:()=>{const a=document.getElementById("ai-solution-surrender");a&&(a.textContent=m.fixed_code)}}),de(),re()}},me=(t,a)=>{const s=t.length,r=a.length;if(s===0)return r===0?1:0;if(r===0)return 0;const i=Array(r+1).fill(null).map(()=>Array(s+1).fill(null));for(let l=0;l<=s;l++)i[0][l]=l;for(let l=0;l<=r;l++)i[l][0]=l;for(let l=1;l<=r;l++)for(let u=1;u<=s;u++)t[u-1]===a[l-1]?i[l][u]=i[l-1][u-1]:i[l][u]=Math.min(i[l-1][u]+1,i[l][u-1]+1,i[l-1][u-1]+1);const x=Math.max(s,r);return(x-i[r][s])/x},Be=(t,a)=>{var xe,pe;const s=t.trim(),r=(xe=a.fixed_code)==null?void 0:xe.trim();if(!s)return console.log("AI Challenge validation: FAIL - No code provided"),!1;if(!r)return console.log("AI Challenge validation: FAIL - No solution available"),!1;if(s===((pe=a.buggy_code)==null?void 0:pe.trim()))return console.log("AI Challenge validation: FAIL - No changes made from original buggy code"),!1;if(s.length<20)return console.log("AI Challenge validation: FAIL - Code too short (minimum 20 characters)"),!1;const i=Te=>Te.replace(/\r\n/g,`
`).replace(/\s+/g," ").replace(/\s*;\s*/g,";").replace(/\s*\{\s*/g,"{").replace(/\s*\}\s*/g,"}").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*==\s*/g,"==").replace(/\s*=\s*/g,"=").trim(),x=i(s),l=i(r);if(x===l)return console.log("AI Challenge validation: PASS - Exact match with AI solution (100%)"),!0;const h=me(x,l),j=Math.round(h*100);console.log(`AI Challenge validation: FAIL - Only ${j}% similarity with AI solution (requires 100%)`);const ue=h>=1;return console.log(`AI Challenge validation: ${ue?"PASS":"FAIL"} (${j}% similarity, requires 100%)`),ue},Ie=async()=>{if(!m||!f.trim()){d.play("failure"),g.fire("Error","Please write some code before submitting.","error");return}try{Y(!0),d.play("typing");const t=Be(f,m),a=me(f.trim().replace(/\s+/g," "),m.fixed_code.trim().replace(/\s+/g," "));if(X({isCorrect:t,similarity:a}),R(!0),t)try{const s=await Ee(),r=(c==null?void 0:c.total_xp)||0,i=r+s,x=w(r),l=w(i),u=l>x;d.play("success"),K(!0),te(!0),se(!0),ae(!0),setTimeout(()=>ae(!1),2e3);const h=window.innerWidth/2,j=window.innerHeight/2;ce(h,j,"success"),u&&setTimeout(()=>{d.play("levelup"),J(!0),ce(h,j-100,"levelup")},1e3),setTimeout(()=>{d.play("victory")},500),await g.fire({title:"AI CHALLENGE MASTERED!",html:`
                            <div class="text-center">
                            <div class="text-5xl mb-4">ü§ñüèÜ</div>
                            <p class="mb-3 text-lg font-semibold text-cyan-200">
                                Exceptional! You've conquered this AI-generated challenge!
                            </p>
                            
                            <div class="bg-blue-900/30 border border-blue-500/40 rounded-lg p-4 mb-4">
                                <div class="text-2xl font-bold text-green-400">100% Perfect Match</div>
                                <div class="text-sm text-gray-200 opacity-80">AI Solution Mastery!</div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div class="bg-gray-900/40 rounded-lg p-3">
                                <div class="text-lg font-bold text-yellow-300">+${s.toFixed(1)}</div>
                                <div class="text-xs text-gray-300">XP Earned</div>
                                </div>
                                <div class="bg-gray-900/40 rounded-lg p-3">
                                <div class="text-lg font-bold text-purple-300">Level ${l}</div>
                                <div class="text-xs text-gray-300">Current Level</div>
                                </div>
                            </div>

                            <div class="text-sm text-gray-300">
                                ‚è±Ô∏è Completed in ${Math.floor(y/60)}m ${y%60}s
                            </div>

                            ${u?`
                                <div class="mt-4 text-center">
                                <div class="text-lg font-bold text-pink-400 animate-pulse">‚ú® LEVEL UP! ‚ú®</div>
                                <p class="text-sm text-gray-200">
                                    You've reached Level ${l}! 
                                    Next: ${E(i)} XP needed.
                                </p>
                                </div>
                            `:""}
                            </div>
                        `,timer:6e3,timerProgressBar:!0,showConfirmButton:!0,confirmButtonText:"Generate New Challenge!",background:"linear-gradient(135deg, #1e3a8a 0%, #312e81 100%)",color:"#fff",confirmButtonColor:"#10B981"}),de(),setTimeout(()=>{K(!1),te(!1),J(!1),se(!1)},7e3)}catch(s){console.error("Reward application failed:",s),d.play("failure"),g.fire({icon:"warning",title:"Completed but rewards failed",text:"Challenge completed but there was an issue applying rewards. Please check your connection and try again.",background:"#1f2937",color:"#fff"})}else d.play("failure"),ee(!0),setTimeout(()=>ee(!1),600),await g.fire({title:"Almost There!",html:`
                                           <div class="text-center">
                                           <div class="text-5xl mb-4">‚ö†Ô∏è</div>
                                           <p class="mb-3 text-lg font-semibold text-red-200">
                                               Your solution must exactly match the database answer.
                                           </p>
               
                                           <div class="bg-red-900/30 border border-red-500/40 rounded-lg p-4 mb-4">
                                               <div class="text-lg font-bold text-yellow-300">${Math.round(a*100)}% Match</div>
                                               <div class="text-sm text-gray-200 opacity-80">Need 100% for Success</div>
                                           </div>
               
                                           <div class="bg-gray-900/40 rounded-lg p-3 text-left text-sm text-gray-200">
                                               <div class="font-medium text-yellow-400 mb-1">üí° Tips:</div>
                                               <ul class="list-disc list-inside space-y-1">
                                               <li>Ensure your code is at least 20 characters long</li>
                                               <li>Don‚Äôt just copy the buggy version</li>
                                               <li>Whitespace, symbols & punctuation matter</li>
                                               <li>‚ö†Ô∏è Don‚Äôt remove or add unnecessary comments ‚Äî they are also compared in the database</li>
                                               </ul>
                                           </div>
                                           </div>
                                       `,timer:4500,showConfirmButton:!0,confirmButtonText:"Try Again",background:"linear-gradient(160deg, #0f172a 0%, #1e293b 50%, #111827 100%)",color:"#e5e7eb",confirmButtonColor:"#3B82F6",backdrop:"rgba(0,0,0,0.6)"})}catch(t){console.error("Error submitting solution:",t),d.play("failure");let a="Failed to submit your solution. Please try again.";t instanceof Error&&(a=t.message),g.fire("Error",a,"error")}finally{Y(!1)}},Pe=t=>{const a=Math.floor(t/60),s=t%60;return`${a}:${s.toString().padStart(2,"0")}`},D=({title:t,value:a,icon:s,color:r,animated:i=!1})=>e.jsx("div",{className:`
                bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 
                ${i?"animate-pulse glow-effect":""} 
                hover:scale-105 hover:shadow-xl transition-all duration-300 
                ${Ce?"glow-success":""}
                cursor-pointer
            `,onMouseEnter:()=>d.play("hover"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r} transition-all duration-300`,children:e.jsx(s,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:t}),e.jsx("p",{className:"text-lg font-bold text-white",children:a})]})]})});return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(De,{}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-purple-400 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-1 h-1 bg-cyan-400 rounded-full animate-pulse opacity-30"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-3 h-3 bg-pink-400 rounded-full animate-bounce opacity-10"}),k.map(t=>e.jsx("div",{className:"absolute pointer-events-none particle-effect",style:{left:`${t.x}px`,top:`${t.y}px`,backgroundColor:t.color,width:`${t.size}px`,height:`${t.size}px`,borderRadius:"50%",opacity:t.life/t.maxLife,boxShadow:`0 0 ${t.size}px ${t.color}`}},t.id))]}),we&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/80 to-pink-900/80 backdrop-blur-md z-50 flex items-center justify-center animate-fadeIn",children:e.jsxs("div",{className:"text-center text-white animate-bounceIn levelup-container",children:[e.jsxs("div",{className:"crown-animation mb-6",children:[e.jsx(H,{className:"w-24 h-24 mx-auto text-yellow-400 animate-spin-slow"}),e.jsx("div",{className:"crown-glow"})]}),e.jsx("h2",{className:"text-8xl font-bold mb-4 bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 bg-clip-text text-transparent animate-pulse",children:"LEVEL UP!"}),e.jsxs("p",{className:"text-3xl opacity-90 animate-slideInUp",children:["You reached Level ",c==null?void 0:c.current_level,"!"]}),e.jsx("div",{className:"mt-6 animate-slideInUp delay-300",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/20 px-6 py-3 rounded-full backdrop-blur-sm",children:[e.jsx(L,{className:"w-5 w-5 text-yellow-400"}),e.jsxs("span",{className:"text-lg font-semibold",children:["Only ",c==null?void 0:c.xp_to_next_level," XP to next level!"]}),e.jsx(L,{className:"w-5 w-5 text-yellow-400"})]})})]})}),z&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-0 animate-fadeIn",children:e.jsxs("div",{className:"ai-modal bg-gray-900/95 border border-gray-700/50 w-full h-full max-w-none max-h-none overflow-y-auto rounded-none",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[e.jsx(Xe,{className:"h-6 w-6 mr-2"}),m.title]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:Pe(y)})]}),e.jsxs("button",{onClick:Me,className:"flex items-center space-x-2 px-4 py-2 bg-red-600/80 text-white rounded-lg hover:bg-red-600 transition-colors",onMouseEnter:()=>d.play("hover"),children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{children:"Surrender & Show Answer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/80",children:"Language"}),e.jsx("div",{className:"text-lg font-bold text-white",children:ke(p)})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/80",children:"Difficulty"}),e.jsx("div",{className:"text-lg font-bold capitalize",children:v})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/80",children:"Reward"}),e.jsx("div",{className:"text-xs text-white/80",children:C?"Hint used (-0.5 XP)":"No hint bonus"})]})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-cyan-400 font-bold mb-3 flex items-center",children:[e.jsx(Ue,{className:"h-5 w-5 mr-2"}),"Challenge Description"]}),e.jsx("p",{className:"text-gray-200 leading-relaxed",children:m.description})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-yellow-400 font-bold flex items-center",children:[e.jsx(Ge,{className:"h-5 w-5 mr-2"}),"Hint"]}),!C&&e.jsx("button",{onClick:()=>{T(!0),d.play("click")},className:"px-3 py-1 bg-yellow-600/20 text-yellow-300 rounded-lg text-sm hover:bg-yellow-600/30 transition-colors",onMouseEnter:()=>d.play("hover"),children:"Show Hint"})]}),C?e.jsx("p",{className:"text-yellow-200",children:m.hint}):e.jsx("p",{className:"text-gray-400 italic",children:'Click "Show Hint" if you need help but it will less your xp rewards'})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-cyan-400 font-bold mb-3",children:"Your Solution"}),e.jsx("textarea",{value:f,onChange:t=>B(t.target.value),className:"w-full h-96 p-4 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-200 font-mono text-sm resize-none transition-all duration-300",placeholder:"Fix the bugs in this code..."}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:$&&b&&e.jsx("div",{className:"text-sm text-gray-400",children:b.isCorrect?e.jsx("span",{className:"text-green-400 font-medium",children:"‚úÖ Perfect 100% match!"}):e.jsxs("span",{className:"text-yellow-400 font-medium",children:["üìä ",Math.round(b.similarity*100),"% similarity (need 100%)"]})})}),e.jsx("div",{className:"flex items-center space-x-3",children:(!$||!(b!=null&&b.isCorrect))&&e.jsxs("button",{onClick:Ie,disabled:M||!f.trim(),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg hover:from-green-600 hover:to-blue-700 disabled:opacity-50 transition-all duration-300 font-medium shadow-lg hover:scale-105",onMouseEnter:()=>d.play("hover"),children:[M?e.jsx(he,{className:"h-5 w-5 animate-spin"}):e.jsx(Ye,{className:"h-5 w-5"}),e.jsx("span",{children:M?"Submitting...":$?"Try Again":"Submit Solution"})]})})]})]})]})})]})}),e.jsxs(ze,{breadcrumbs:Je,children:[e.jsx(Re,{title:"AI Generated Challenges"}),e.jsxs("div",{className:`flex flex-col gap-6 p-4 relative z-10 ${Ne?"animate-shake":""}`,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:`h-8 w-8 text-purple-400 ${_e?"animate-spin":""} transition-all duration-300`}),e.jsx(L,{className:"h-6 w-6 text-yellow-400"}),e.jsx(Qe,{className:"h-8 w-8 text-cyan-400"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"AI CHALLENGES"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Unique coding challenges created by artificial intelligence"})]})]})}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"h-6 w-6 text-yellow-400"}),e.jsxs("span",{className:"text-xl font-bold text-white",children:["Level ",c.current_level]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["(",ne(c.total_xp),"/10 XP)"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Next Level"}),e.jsxs("div",{className:"text-cyan-400 font-bold",children:[c.xp_to_next_level," XP needed"]})]})]}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 overflow-hidden relative",children:[e.jsx("div",{className:`bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-500 h-4 rounded-full transition-all duration-1000 ease-out progress-bar-glow ${Se?"animate-pulse":""}`,style:{width:`${oe(c.total_xp)}%`},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold text-white drop-shadow-lg",children:[Math.round(oe(c.total_xp)),"%"]})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[e.jsxs("span",{children:["Level ",c.current_level]}),e.jsxs("span",{children:[ne(c.total_xp)," / 10 XP"]}),e.jsxs("span",{children:["Level ",c.current_level+1]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(D,{title:"Level",value:c.current_level,icon:H,color:"bg-orange-500"}),e.jsx(D,{title:"Total XP",value:c.total_xp||0,icon:Ve,color:"bg-yellow-500"}),e.jsx(D,{title:"AI Completed",value:c.ai_successful_attempts||0,icon:We,color:"bg-purple-500",animated:je})]})]}),e.jsx("div",{className:"max-w-4xl mx-auto w-full",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(Ze,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Generate Your AI Challenge"}),e.jsx("p",{className:"text-gray-400",children:"Configure your preferences and let AI create a unique coding challenge"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Programming Language"}),e.jsxs("select",{value:p,onChange:t=>ge(t.target.value),className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-200 transition-all duration-300",onMouseEnter:()=>d.play("hover"),children:[e.jsx("option",{value:"python",children:"Python"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"cpp",children:"C++"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Level"}),e.jsxs("select",{value:v,onChange:t=>fe(t.target.value),className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-200 transition-all duration-300",onMouseEnter:()=>d.play("hover"),children:[e.jsx("option",{value:"easy",children:"Easy (3.0 XP)"}),e.jsx("option",{value:"medium",children:"Medium (4.0 XP)"}),e.jsx("option",{value:"hard",children:"Hard (6.0 XP)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Topic (Optional)"}),e.jsxs("select",{value:_,onChange:t=>be(t.target.value),className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-200 transition-all duration-300",onMouseEnter:()=>d.play("hover"),children:[e.jsx("option",{value:"",children:"Random Topic"}),ve.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:Fe,disabled:U,className:"inline-flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-xl hover:from-purple-600 hover:to-pink-700 disabled:opacity-50 transition-all duration-300 font-bold text-lg shadow-lg hover:scale-105",onMouseEnter:()=>d.play("hover"),children:U?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Generating Challenge..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-6 w-6"}),e.jsx("span",{children:"Generate AI Challenge"})]})})})]})})]})]}),e.jsx("style",{children:`
  body.solo-open {
    overflow: hidden !important;
  }
  body.solo-open header {
    opacity: 0 !important;
    pointer-events: none !important;
  }

  /* üß© Remove fullscreen-stretch for modal ‚Äî keep page fullscreen instead */
  .ai-modal {
    width: 95vw;
    max-width: 1400px;
    height: auto;
    max-height: 95vh;
    margin: auto;
    border-radius: 1rem;
  }

  /* Optional: better scroll behavior inside modal */
  .ai-modal::-webkit-scrollbar {
    width: 8px;
  }
  .ai-modal::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
  }
`})]})}export{wt as default};
